<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2020-04-06 Mon 07:31 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>èŒƒç•´è®ºå®Œå…¨è£…é€¼æ‰‹å†Œ / Grokking Monad</title>
<meta name="generator" content="Org mode">
<meta name="author" content="æ¬§é˜³ç»§è¶…">
<meta name="description" content="å·ä¸€ çŒ«è®º"
>
<link rel="icon" href="/favicon.ico">
<meta name="theme-color" content="#ffffff">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style/toc.css"/>
<link rel="stylesheet" href="/style/tufte.css"/>
<link rel="alternate" type="application/rss+xml" title="Jichao Ouyang" href="https://feeds.oyanglul.us/JichaoOuyangsBlog"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJRFJGX"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<header>
    <a accesskey="h" href="/index.html"> HOME </a> |
    <a href="#" id="edit-in-github">EDIT</a> |
    <a href="https://feeds.oyanglul.us/JichaoOuyangsBlog">RSS</a> |
    <a href="https://blog.oyanglul.us/theindex">INDEX</a> |
    <a accesskey="H" href="/jichao.ouyang.html">ABOUT</a> |
    <a href="https://github.com/jcouyang/blog">GITHUB</a>
</header>
</div>
<div id="content">
<header>
<h1 class="title">èŒƒç•´è®ºå®Œå…¨è£…é€¼æ‰‹å†Œ / Grokking Monad</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgd9a36f1">ç¬¬ä¸€éƒ¨åˆ†ï¼š<ruby>çŒ«è®º<rt>Catergory Theory</rt></ruby></a>
<ul>
<li><a href="#orgbf900a8"><i>Category</i></a>
<ul>
<li><a href="#org1dc3286"><i>Hask</i></a></li>
<li><a href="#org52ba652"><i>Duel</i></a></li>
</ul>
</li>
<li><a href="#orgea2dda4">å‡½å­ / Functor</a></li>
<li><a href="#org6e0cc40"><span class="todo TODO">TODO</span> <i><ruby>Cat<rt> +çŒ«+</rt></ruby></i></a></li>
<li><a href="#org5305314">è‡ªç„¶å˜æ¢ / Natural Transformations </a></li>
<li><a href="#org55c5c26">String Diagram</a></li>
<li><a href="#org02ba778"><i>Adjunction Functor</i> ä¼´éšå‡½å­</a></li>
<li><a href="#org157f17f">ä»ä¼´éšå‡½å­åˆ° <ruby>å•å­<rt> Monad</rt></ruby></a>
<ul>
<li><a href="#orgca7d5a1">ä¸‰è§’ç­‰å¼</a></li>
<li><a href="#orgf2a5830">ç»“åˆå¾‹</a></li>
</ul>
</li>
<li><a href="#org1a754d9">Yoneda lemma / <del>ç±³ç”°å…±</del> ç±³ç”°å¼•ç†</a>
<ul>
<li><a href="#orgade6eef">Rank N Type</a></li>
</ul>
</li>
<li><a href="#org0fb6f6c">Kan extensions çœ‹å±•</a>
<ul>
<li><a href="#org043688b"><span class="todo TODO">TODO</span> insert diagram</a></li>
<li><a href="#org77bbe66"><span class="todo TODO">TODO</span> insert diagram</a></li>
</ul>
</li>
<li><a href="#org733f8e7"><i>Kleisli Catergory</i></a></li>
<li><a href="#orgc07522e">Summary</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<ul class="org-ul">
<li><b><a href="./part1.html">ç¬¬ä¸€éƒ¨åˆ†ï¼šçŒ«è®º</a></b> ğŸ‘ˆ</li>
<li><a href="./part2.html">ç¬¬äºŒéƒ¨åˆ†ï¼šé£Ÿç”¨çŒ«å‘¢</a></li>
<li><a href="./part3.html">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæåŸºçŒ«å‘¢</a></li>
</ul>
<div id="outline-container-orgd9a36f1" class="outline-2">
<h2 id="orgd9a36f1">ç¬¬ä¸€éƒ¨åˆ†ï¼š<ruby>çŒ«è®º<rt>Catergory Theory</rt></ruby></h2>
<div class="outline-text-2" id="text-orgd9a36f1">
<p>
<img src="./images/Cheshire_Cat.png" alt="Cheshire_Cat.png"> <label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/><span class="sidenote">
<a href="https://en.wikipedia.org/wiki/Cheshire_Cat">https://en.wikipedia.org/wiki/Cheshire_Cat</a>
</span>
</p>

<div class="epigraph"><blockquote>
<p>
`But I donâ€™t want to go among mad people,â€™ Alice remarked.
</p>

<p>
`Oh, you canâ€™t help that,â€™ said the Cat: `weâ€™re all mad here. Iâ€™m mad. Youâ€™re mad.â€™
</p>

<p>
`How do you know Iâ€™m mad?â€™ said Alice.
`You must be,â€™ said the Cat, `or you wouldnâ€™t have come here.â€™
</p>

<p>
Alice didnâ€™t think that proved it at all; however, she went on `And how do you know that youâ€™re mad?â€™
</p>

<p>
&#x2013; Alice's Adventures in Wonderland
</p>

</blockquote></div>

<p>
<ruby>å•å­<rt>Monad</rt></ruby>æ˜¯ä»€ä¹ˆ? ä½ ä¹Ÿä¸æ‡‚, æˆ‘ä¹Ÿä¸æ‡‚, æˆ‘ä»¬éƒ½ä¸æ‡‚.
</p>

<p>
è¯è¯´, æˆ‘åˆæ€ä¹ˆçŸ¥é“ä½ ä¸æ‡‚å‘¢?
</p>

<p>
å½“ç„¶ä¸æ‡‚, ä¸ç„¶, ä½ æ€ä¹ˆä¼šæ¥åˆ°è¿™é‡Œ?
</p>

<p>
æˆ‘åˆæ˜¯æ€ä¹ˆçŸ¥é“è‡ªå·±ä¸æ‡‚å‘¢?
</p>

<p>
å› ä¸º, æˆ‘çŸ¥é“æ‡‚çš„äººä»€ä¹ˆæ ·å­. æ˜¾ç„¶, æˆ‘ä¸æ˜¯.
</p>

<p>
æ‡‚çš„äººä¸€å®šçŸ¥é“<ruby>çŒ«è®º<rt> Category Theory</rt></ruby>.
</p>

<p>
æ‡‚çŒ«è®ºçš„äººåˆä¸ä¸€å®šçŸ¥é“ç¼–ç¨‹. ä½†æ˜¯æ‡‚ç¼–ç¨‹çš„äººå¯ä»¥ç•¥æ‡‚çŒ«è®º.
</p>

<p>
ç¼–ç¨‹æ˜¯é¡¹æŠ€æœ¯, å³ç†è®ºçš„é™ç»´. æ‰€ä»¥è¦é™ä½é—¨æ§›, æ¯”å¦‚æˆ‘åœ¨ä¹¦ä¸­ä¹Ÿ<a href="https://book.douban.com/subject/26883736/">å†™è¿‡ä¸€ç« </a>ç”¨JavaScriptæ¥è§£é‡Šï¼ŒæŸäººä¹Ÿå°è¯•è¿‡<a href="http://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html">å†™åšå®¢è§£é‡Š</a>ï¼Œ<label for="2" class="margin-toggle sidenote-number"></label><input type="checkbox" id="2" class="margin-toggle"/><span class="sidenote">
å¦‚æœæ²¡çœ‹å°±åˆšå¥½ä¸è¦çœ‹äº†, ç¡®å®æœ‰äº›è¯¯å¯¼
</span>æ²¡æƒ³åˆ°é‚£äº›ä¹Ÿä¸çŸ¥é“ä¼šä¸ä¼š Haskell/Scala çš„äººå°±è·‘å‡ºæ¥å–·ä½ ä»¬å‰ç«¯<label for="3" class="margin-toggle sidenote-number"></label><input type="checkbox" id="3" class="margin-toggle"/><span class="sidenote">
ç­‰ç­‰, å†™å‰ç«¯æ€ä¹ˆäº†? JavaScript åªæ˜¯æˆ‘è§‰å¾—é¡ºæ‰‹çš„è‹¥å¹²è¯­è¨€ä¹‹ä¸€, JSç”¨æˆ·é‚£ä¹ˆå¤š, å†™ä¹¦å½“ç„¶è¦ç”¨ JS å•¦, éš¾é“ç”¨ Idris é‚£è¿˜èƒ½å–å¾—æ‰å—? <del>å½“ç„¶æœ€åç”¨JSä¹Ÿæ²¡æ€ä¹ˆå–æ‰&#x2026;</del>
</span>è¿™äº›ä¸æ‡‚å‡½æ•°å¼çš„æ¸£æ¸£ä¹±æå‡ºæ¥çš„ä¸œè¥¿æ ¹æœ¬å°±ä¸æ˜¯å•å­ã€‚
</p>

<p>
æˆ‘ä¹Ÿç”»è¿‡ä¸€äº›å›¾æ¥è§£é‡Šï¼Œåˆä¼šè¢«å«Œå¼ƒç”»é£ä¸å¥½ã€‚ä½†æ˜¯ï¼Œä½œä¸ºçµé­‚ç”»å¸ˆï¼Œæˆ‘åª <del>æ˜¯è§‰å¾—è‡ªå·±èŒèŒçš„å•Š</del> åœ¨ä¹ç”»çš„çµé­‚æ˜¯å¦èƒ½å¤Ÿç»™ä½ ä¸€ç‚¹å¯å‘ã€‚å¥½å§ï¼Œè®²è¿™ä¹ˆå­¦æœ¯çš„ä¸œè¥¿ï¼Œè¿˜æ˜¯ç”¨dotæ¥ç”»å§ï¼Œçœ‹èµ·æ¥å¥½æ­£è§„å‘¢ã€‚
</p>

<p>
å¥½äº†ï¼Œå®‰å…¨å¸¦ç³»å¥½ï¼Œæˆ‘çœŸçš„è¦å¼€è½¦äº†ã€‚ä¸ºäº†é˜²æ­¢<ruby>è§£é‡Šçš„ä¸åˆ°ä½<rt>åˆè¢«å–·</rt></ruby>ï¼Œå°±ç”¨ Haskell/Scala å¥½äº†<label for="4" class="margin-toggle sidenote-number"></label><input type="checkbox" id="4" class="margin-toggle"/><span class="sidenote">
å¹¶ä¸æ˜¯è¯´è¿™ä¸¤é—¨è¯­è¨€ä¸€å®šåœ¨é„™è§†é“¾é¡¶ç«¯, è€Œæ˜¯æ‹¥æœ‰å¼ºå¤§ç±»å‹ç³»ç»Ÿçš„è¯­è¨€æ‰èƒ½ä½“ç°å‡ºèŒƒç•´è®ºçš„å†…å®¹
</span>ï¼Œå…¶å®ä¹Ÿä¸éš¾è§£é‡Šæ¸…æ¥š <del>æ‰æ€ª</del> ã€‚
</p>

<p>
è¿™é‡Œé¢å¾ˆå¤šå¾ˆè£…é€¼çš„å•è¯ï¼Œå®ƒä»¬éƒ½æ˜¯ <i>æ–œä½“</i> ï¼Œå°±ç®—æ²¡çœ‹æ‡‚ï¼ŒæŠŠè¿™äº›è¯èƒŒä¸‹æ¥ä¹Ÿè¶³å¤Ÿ<ruby>è£…å¥½ä¸€é˜µå­é€¼äº†<rt>ä¹°ä¸€é˜µå­èŒäº†</rt></ruby>ã€‚
</p>

<p>
è¿™é‡Œè¿˜æœ‰å¾ˆå¤šä»£ç , å®ƒä»¬éƒ½æˆå¯¹å‡ºç°, ç¬¬ä¸€æ®µæ˜¯ Haskell, ç¬¬äºŒæ®µæ˜¯ Scala.
</p>
</div>

<div id="outline-container-orgbf900a8" class="outline-3">
<h3 id="orgbf900a8"><i>Category</i></h3>
<div class="outline-text-3" id="text-orgbf900a8">
<p>
ä¸€ä¸ª <i><ruby>èŒƒç•´<rt>Category</rt></ruby></i> åŒ…å«ä¸¤ä¸ªç©æ„
</p>
<ul class="org-ul">
<li>ä¸œè¥¿ <code>O</code> ï¼ˆObjectï¼‰</li>
<li>ä¸¤ä¸ªä¸œè¥¿çš„å…³ç³»ï¼Œç®­å¤´ <code>~&gt;</code> ï¼ˆ <i><ruby>æ€å°„<rt>Morphism</rt></ruby></i> ï¼‰</li>
</ul>

<p>
è¿˜å¿…é¡»å¸¦ä¸Šä¸€äº›å±æ€§: 
</p>
<ul class="org-ul">
<li>ä¸€å®šæœ‰ä¸€ä¸ªå« id çš„ç®­å¤´ï¼Œä¹Ÿå«åš 1</li>
<li>ç®­å¤´å¯ä»¥ <i><ruby>ç»„åˆ<rt> compose</rt></ruby></i></li>
</ul>

<p>
æ©, å°±æ˜¯è¿™ä¹ˆç®€å•!
</p>


<figure>
<object type="image/svg+xml" data="images/category.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>

<figcaption><span class="figure-number">Figure 1: </span>æœ‰ä¸œè¥¿ a, b, c å’Œç®­å¤´ f, g çš„ Categoryï¼Œå…¶ä¸­ f . g è¡¨ç¤º compose f å’Œ g</figcaption>
</figure>


<div class="epigraph"><blockquote>
<p>
æ³¨æ„åˆ°ä¸ºä»€ä¹ˆæˆ‘ä¼šç®­å¤´ä»å³å¾€å·¦ï¼Œæ¥ç€çœ‹ä»£ç , ä½ ä¼šå‘ç°è¿™ä¸ªæ–¹å‘è·Ÿ compose çš„æ–¹å‘åˆšå¥½ä¸€è‡´!
</p>

</blockquote></div>

<p>
è¿™äº›ç©æ„å¯¹åº”åˆ° haskell çš„ typeclass å¤§è‡´å°±æ˜¯è¿™æ ·:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">class</span> <span style="color: #36648b;">Category</span> (c <span style="color: #b8860b;">::</span> <span style="color: #b8860b;">*</span> <span style="color: #b8860b;">-&gt;</span> <span style="color: #b8860b;">*</span> <span style="color: #b8860b;">-&gt;</span> <span style="color: #b8860b;">*</span>) <span style="color: #00008b;">where</span>
  id <span style="color: #b8860b;">::</span> c a a
  (<span style="color: #b8860b;">.</span>) <span style="color: #b8860b;">::</span> c y z <span style="color: #b8860b;">-&gt;</span> c x y <span style="color: #b8860b;">-&gt;</span> c x z
</pre>
</div>


<p>
è€Œ Scala å¯ä»¥ç”¨ trait æ¥è¡¨ç¤ºè¿™ä¸ª typeclass:
</p>
<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">trait</span> <span style="color: #36648b;">Category</span>[<span style="color: #6b8e23;">C</span>[<span style="color: #00008b;">_</span>, <span style="color: #00008b;">_</span>]] {
  <span style="color: #00008b;">val</span> <span style="color: #b8860b;">id</span>[<span style="color: #6b8e23;">A</span>]<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>[<span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">A</span>]
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">&lt;&lt;&lt;</span>(a<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>[<span style="color: #6b8e23;">Y</span>, <span style="color: #6b8e23;">Z</span>], b<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>[<span style="color: #6b8e23;">X</span>, <span style="color: #6b8e23;">Y</span>])<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>[<span style="color: #6b8e23;">X</span>, <span style="color: #6b8e23;">Z</span>] 
}
</pre>
</div>

<p>
å¦‚æœè¿™æ˜¯ä½ ç¬¬ä¸€æ¬¡è§åˆ° Haskell ä»£ç ï¼Œæ²¡æœ‰å…³ç³»ï¼Œè¯­æ³•çœŸçš„å¾ˆç®€å• <del>æ‰æ€ª</del>
</p>
<ul class="org-ul">
<li><code>class</code> å®šä¹‰äº†ä¸€ä¸ª TypeClassï¼Œ <code>Category</code> æ˜¯è¿™ä¸ª TypeClass çš„åå­—</li>
<li>Type class ç±»ä¼¼äºå®šä¹‰ç±»å‹çš„è§„èŒƒï¼Œè§„èŒƒä¸º <code>where</code> åé¢é‚£ä¸€å¨</li>
<li>ç±»å‹è§„èŒƒçš„å¯¹è±¡æ˜¯å‚æ•° <code>(c:: * -&gt; * -&gt; *)</code> ï¼Œ <code>::</code> åé¢æ˜¯cçš„ç±»å‹</li>
<li>c æ˜¯ <i>higher kind</i> <code>* -&gt; *</code> ï¼Œè·Ÿhigher order functionçš„å®šä¹‰å·®ä¸å¤šï¼Œå®ƒæ˜¯æ¥æ”¶ç±»å‹ï¼Œæ„é€ æ–°ç±»å‹çš„ç±»å‹ã€‚è¿™é‡Œçš„ c æ¥æ”¶ä¸€ä¸ªç±»å‹ï¼Œå†æ¥æ”¶ä¸€ä¸ªç±»å‹ï¼Œå°±å¯ä»¥è¿”å›ä¸ªç±»å‹ã€‚</li>
</ul>
<ul class="org-ul">
<li><code>id:: c a a</code> è¡¨ç¤º c èŒƒç•´ä¸Šçš„ a åˆ° a çš„ç®­å¤´</li>
<li><code>.</code> çš„æ„æ€ c èŒƒç•´ä¸Šï¼Œå¦‚æœå–‚ä¸€ä¸ª y åˆ° z çš„ç®­å¤´ï¼Œå†å–‚ä¸€ä¸ª x åˆ° y çš„ç®­å¤´ï¼Œé‚£ä¹ˆå°±è¿”å› x åˆ° z çš„ç®­å¤´ã€‚</li>
</ul>

<p>
å¦å¤– compose åœ¨ haskell ä¸­ç›´æ¥æ˜¯å¥å· <code>.</code>
</p>

<p>
scala ä¸­ç”¨ <code>&lt;&lt;&lt;</code> æˆ–è€… <code>compose</code>
</p>

<p>
æ€»ä¹‹, ç”¨æ–‡å­—å†è¯»ä¸€éä¸Šé¢è¿™äº›ä»£ç å°±äº†ç„¶äº†.
</p>

<p>
èŒƒç•´ C å…¶å®å°±åŒ…å«
</p>
<ol class="org-ol">
<li>è¿”å› A å¯¹è±¡åˆ° A å¯¹è±¡çš„ id ç®­å¤´</li>
<li>å¯ä»¥ç»„åˆ Y å¯¹è±¡åˆ° Z å¯¹è±¡ å’Œ X å¯¹è±¡åˆ° Y å¯¹è±¡çš„ç®­å¤´ compose</li>
</ol>

<p>
<ruby>ç®€å•å§<rt>hen nan ba</rt></ruby>?è¿˜æ²¡æœ‰é«˜æ•°æŠ½è±¡å‘¢ã€‚
</p>
</div>

<div id="outline-container-org1dc3286" class="outline-4">
<h4 id="org1dc3286"><i>Hask</i></h4>
<div class="outline-text-4" id="text-org1dc3286">
<p>
Haskell ç±»å‹ç³»ç»ŸèŒƒç•´å«åš Hask
</p>
<p>
åœ¨ Hask èŒƒç•´ä¸Šï¼š
</p>

<ul class="org-ul">
<li>ä¸œè¥¿å°±æ˜¯ç±»å‹</li>
<li>ç®­å¤´æ˜¯ç±»å‹çš„å˜æ¢ï¼Œå³ <code>-&gt;</code></li>
<li>id å°±æ˜¯ id å‡½æ•°çš„ç±»å‹ <code>a -&gt; a</code></li>
<li>compose å½“ç„¶å°±æ˜¯å‡½æ•°ç»„åˆçš„ç±»å‹</li>
</ul>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">type</span> <span style="color: #36648b;">Hask</span> <span style="color: #b8860b;">=</span> <span style="color: #36648b;">(-&gt;)</span>
<span style="color: #00008b;">instance</span> <span style="color: #36648b;">Category</span> (<span style="color: #36648b;">Hask</span><span style="color: #b8860b;">::</span> <span style="color: #b8860b;">*</span> <span style="color: #b8860b;">-&gt;</span> <span style="color: #b8860b;">*</span> <span style="color: #b8860b;">-&gt;</span> <span style="color: #b8860b;">*</span>) <span style="color: #00008b;">where</span>
  (f <span style="color: #b8860b;">.</span> g) x <span style="color: #b8860b;">=</span> f (g x)
</pre>
</div>

<p>
æˆ‘ä»¬çœ‹è§æ–°çš„å…³é”®å­— <code>instance</code> ï¼Œè¿™è¡¨ç¤º Hask æ˜¯ Type class Category çš„å®ä¾‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹ä»»æ„Haskç±»å‹, é‚£ä¹ˆå°±èƒ½æ‰¾åˆ°å®ƒçš„ id å’Œ compose
</p>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #228b22;">implicit</span> <span style="color: #00008b;">val</span> <span style="color: #b8860b;">haskCat</span><span style="color: #00008b;">:</span> <span style="color: #36648b;">Category</span>[<span style="color: #6b8e23;">Hask</span>[<span style="color: #00008b;">_</span>, <span style="color: #00008b;">_</span>]] <span style="color: #00008b;">=</span> <span style="color: #00008b;">new</span> <span style="color: #36648b;">Category</span>[<span style="color: #6b8e23;">Hask</span>] {
  <span style="color: #00008b;">val</span> <span style="color: #b8860b;">id</span>[<span style="color: #6b8e23;">A</span>] <span style="color: #00008b;">=</span> identity[<span style="color: #6b8e23;">A</span>]
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">&lt;&lt;&lt;</span>[<span style="color: #6b8e23;">X</span>, <span style="color: #6b8e23;">Y</span>, <span style="color: #6b8e23;">Z</span>](a<span style="color: #00008b;">:</span> <span style="color: #36648b;">Hask</span>[<span style="color: #6b8e23;">Y</span>, <span style="color: #6b8e23;">Z</span>], b<span style="color: #00008b;">:</span> <span style="color: #36648b;">Hask</span>[<span style="color: #6b8e23;">X</span>, <span style="color: #6b8e23;">Y</span>]) <span style="color: #00008b;">=</span> a compose b
}
</pre>
</div>

<p>
Scala ä¸­, åªéœ€è¦ new è¿™ä¸ª trait å°±å¯ä»¥å®ç°è¿™ä¸ª typeclass
</p>

<p>
å…¶ä¸­: identity <code>Hask a a</code> å°±æ˜¯
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #36648b;">(-&gt;)</span> a a <span style="color: #8c8c8c; font-style: italic;">-- </span><span style="color: #8c8c8c; font-style: italic;">or</span>
a <span style="color: #b8860b;">-&gt;</span> a <span style="color: #8c8c8c; font-style: italic;">-- </span><span style="color: #8c8c8c; font-style: italic;">&#22240;&#20026; -&gt; &#26159;&#20013;&#32512;&#26500;&#36896;&#22120;</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #6b8e23;">A</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">A</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org52ba652" class="outline-4">
<h4 id="org52ba652"><i>Duel</i></h4>
<div class="outline-text-4" id="text-org52ba652">
<p>
æ¯ä¸ª Category è¿˜æœ‰ä¸€ä¸ªé•œåƒï¼Œä»€ä¹ˆéƒ½ä¸€æ ·ï¼Œé™¤äº†ç®­å¤´æ˜¯åçš„
</p>
</div>
</div>
</div>

<div id="outline-container-orgea2dda4" class="outline-3">
<h3 id="orgea2dda4">å‡½å­ / Functor</h3>
<div class="outline-text-3" id="text-orgea2dda4">
<p>
ä¸¤ä¸ªèŒƒç•´ä¸­é—´å¯ä»¥ç”¨å« Functor çš„ä¸œè¥¿æ¥è¿æ¥èµ·æ¥ï¼Œç®€ç§° Tã€‚
</p>


<figure>
<object type="image/svg+xml" data="images/functor.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>

<figcaption><span class="figure-number">Figure 2: </span>Functor C D T, ä» C åˆ° D èŒƒç•´çš„Functor T</figcaption>
</figure>

<p>
æ‰€ä»¥å¤§éƒ¨åˆ†æŠŠ Functor/Monad æ¯”å–»æˆç›’å­å…¶å®åœ¨å®šä¹‰ä¸Šæ˜¯é”™çš„ï¼Œè™½ç„¶è¿™æ ·æ¯”å–»æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œåœ¨ä½¿ç”¨ä¸Šé—®é¢˜ä¹Ÿä¸å¤§ã€‚ä½†æ˜¯ï¼ŒFunctor åªæ˜¯ä»ä¸€ä¸ªèŒƒç•´åˆ°å¦ä¸€ä¸ªèŒƒç•´çš„æ˜ å°„å…³ç³»è€Œå·²ã€‚
</p>

<ul class="org-ul">
<li>èŒƒç•´é—´ ä¸œè¥¿çš„ Functor æ ‡è®°ä¸º <code>T(O)</code></li>
<li>èŒƒç•´é—´ ç®­å¤´çš„ Functor æ ‡è®°ä¸º <code>T(~&gt;)</code></li>
<li>ä»»ä½•èŒƒç•´Cä¸Šå­˜åœ¨ä¸€ä¸ª T æŠŠæ‰€æœ‰çš„ O å’Œ ~&gt; éƒ½æ˜ å°„åˆ°è‡ªå·±ï¼Œæ ‡è®°ä¸ºid functor 1<sub>C</sub>
<ul class="org-ul">
<li>1<sub>C</sub>(O) = O</li>
<li>1<sub>C</sub>(~&gt;) = ~&gt;</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">class</span> (<span style="color: #36648b;">Category</span> c, <span style="color: #36648b;">Category</span> d) <span style="color: #b8860b;">=&gt;</span> <span style="color: #36648b;">Functor</span> c d t <span style="color: #00008b;">where</span>
  fmap <span style="color: #b8860b;">::</span> c a b <span style="color: #b8860b;">-&gt;</span> d (t a) (t b)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">trait</span> <span style="color: #36648b;">Functor</span>[<span style="color: #6b8e23;">C</span>[<span style="color: #00008b;">_</span>, <span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">D</span>[<span style="color: #00008b;">_</span>, <span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>]] {
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">fmap</span>[<span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">B</span>](c<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>[<span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">B</span>])<span style="color: #00008b;">:</span> <span style="color: #36648b;">D</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">A</span>], <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">B</span>]]
}
</pre>
</div>

<p>
<code>Functor c d t</code> è¿™è¡¨ç¤ºä»èŒƒç•´ c åˆ°èŒƒç•´ d çš„ä¸€ä¸ª Functor t
</p>

<p>
å¦‚æœæŠŠèŒƒç•´ c å’Œ d éƒ½é™åˆ¶åˆ° Hask èŒƒç•´
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">class</span> <span style="color: #36648b;">Functor</span> <span style="color: #36648b;">(-&gt;)</span> <span style="color: #36648b;">(-&gt;)</span> t <span style="color: #00008b;">where</span>
  fmap <span style="color: #b8860b;">::</span> <span style="color: #36648b;">(-&gt;)</span> a b <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">(-&gt;)</span> (t a) (t b)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">trait</span> <span style="color: #36648b;">Functor</span>[<span style="color: #00008b;">=&gt;</span>[<span style="color: #00008b;">_</span>, <span style="color: #00008b;">_</span>], <span style="color: #00008b;">=&gt;</span>[<span style="color: #00008b;">_</span>, <span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>]] {
 <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">fmap</span>[<span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">B</span>](c<span style="color: #00008b;">:</span> <span style="color: #00008b;">=&gt;</span>[<span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">B</span>])<span style="color: #00008b;">:</span> <span style="color: #00008b;">=&gt;</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">A</span>], <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">B</span>]]
}
</pre>
</div>
<p>
<code>-&gt;</code> åœ¨ Haskell ä¸­æ˜¯ä¸­ç¼€ç±»å‹æ„é€ å™¨ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥å†™åœ¨ä¸­é—´çš„
</p>

<p>
è¿™æ ·å°±ä¼šå˜æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ Funtor çš„ Typeclass<label for="5" class="margin-toggle sidenote-number"></label><input type="checkbox" id="5" class="margin-toggle"/><span class="sidenote">
è¿™é‡Œå¯ä»¥æŠŠ Functor çš„ç¬¬ä¸€ç¬¬äºŒä¸ªå‚æ•°æ¶ˆæ‰, å› ä¸ºå·²ç»çŸ¥é“æ˜¯åœ¨ Hask èŒƒç•´äº†
</span>
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">class</span> <span style="color: #36648b;">Functor</span> t <span style="color: #00008b;">where</span>
  fmap <span style="color: #b8860b;">::</span> (a <span style="color: #b8860b;">-&gt;</span> b) <span style="color: #b8860b;">-&gt;</span> (t a <span style="color: #b8860b;">-&gt;</span> t b)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">trait</span> <span style="color: #36648b;">Functor</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>]] {
 <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">fmap</span>[<span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">B</span>](c<span style="color: #00008b;">:</span> <span style="color: #36648b;">A</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">B</span>)<span style="color: #00008b;">:</span> <span style="color: #36648b;">T</span>[<span style="color: #6b8e23;">A</span>] <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">B</span>]
}
</pre>
</div>

<p>
è€Œ <i><ruby>è‡ªå‡½å­<rt>endofunctor</rt></ruby></i> å°±æ˜¯è¿™ç§è¿æ¥ç›¸åŒèŒƒç•´çš„ Functorï¼Œå› ä¸ºå®ƒä»èŒƒç•´ Hask åˆ°è¾¾åŒæ ·çš„èŒƒç•´ Hask
</p>
<p>
è¿™å›çœ‹ä»£ç å°±å¾ˆå®¹æ˜“å¯¹åº”ä¸Šå›¾å’Œæ¦‚å¿µäº†, è¿™é‡Œçš„è‡ªå‡½å­åªæ˜¯æ˜ å°„èŒƒç•´ <code>-&gt;</code> åˆ° <code>-&gt;</code>, ç®­å¤´å‡½æ•°é‚£ä¸ªç®­å¤´, ç±»å‹å´å˜æˆäº† t a
</p>

<p>
è¿™é‡Œçš„ fmap å°±æ˜¯ T(~&gt;)ï¼Œåœ¨ Hask èŒƒç•´ä¸Šï¼Œæ‰€ä»¥æ˜¯ T(-&gt;), è¿™ä¸ªç®­å¤´æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿèƒ½è¡¨ç¤ºæˆ T(f) å¦‚æœ <code>f:: a -&gt; b</code>
</p>
</div>
</div>

<div id="outline-container-org6e0cc40" class="outline-3">
<h3 id="org6e0cc40"><span class="todo TODO">TODO</span> <i><ruby>Cat<rt> +çŒ«+</rt></ruby></i></h3>
<div class="outline-text-3" id="text-org6e0cc40">
<p>
é€’å½’çš„, å½“æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ª Category çœ‹æˆä¸€ä¸ª objectï¼Œfunctor çœ‹æˆç®­å¤´ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆå¾—åˆ°äº†ä¸€ä¸ª Categoryï¼Œè¿™ç§ object æ˜¯ category çš„ category æˆ‘ä»¬å«å®ƒ &#x2013; <i>Cat</i>
</p>

<p>
å·²ç»<ruby>æ²¡<rt> meow</rt></ruby>çš„åŠæ³•ç”¨è¯­è¨€æè¿°è¿™ä¹ˆé«˜ç»´åº¦çš„äº‹æƒ…äº†ï¼Œçœ‹å›¾å§&#x2026;
</p>
</div>
</div>

<div id="outline-container-org5305314" class="outline-3">
<h3 id="org5305314">è‡ªç„¶å˜æ¢ / Natural Transformations <a id="orgb1490d8"></a></h3>
<div class="outline-text-3" id="text-org5305314">
<p>
Functor æ˜¯èŒƒç•´é—´çš„æ˜ å°„ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ª Cat èŒƒç•´ä¸­, æŠŠèŒƒç•´çœ‹æˆæ˜¯å¯¹è±¡, é‚£ä¹ˆ Functor åœ¨ Cat èŒƒç•´åˆæ˜¯ä¸ªç®­å¤´
</p>

<figure>
<object type="image/svg+xml" data="images/natrual-transformation.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>

<figcaption><span class="figure-number">Figure 3: </span>Functor Få’ŒGï¼Œä»¥åŠ F åˆ° G çš„è‡ªç„¶å˜åŒ– &eta;</figcaption>
</figure>

<p>
è€Œ Functor é—´ä¹Ÿæœ‰æ˜ å°„ï¼Œå«åš <del>å–µçš„å˜æ¢</del> <i>è‡ªç„¶å˜æ¢</i>
</p>

<p>
èŒƒç•´ c ä¸Šçš„å‡½å­ f åˆ° g çš„è‡ªç„¶å˜åŒ–å°±å¯ä»¥è¡¨ç¤ºæˆ
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">type</span> <span style="color: #36648b;">Nat</span> c f g <span style="color: #b8860b;">=</span> c (f a) (g a)
</pre>
</div>

<p>
Scala æ²¡æœ‰ rank n type<label for="6" class="margin-toggle sidenote-number"></label><input type="checkbox" id="6" class="margin-toggle"/><span class="sidenote">
åˆ«æ€¥, åé¢é©¬ä¸Šè®²åˆ°
</span>, åªèƒ½é  apply æ¥ meme äº†
</p>
<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">trait</span> <span style="color: #36648b;">Nat</span>[<span style="color: #6b8e23;">C</span>[<span style="color: #00008b;">_</span>, <span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">F</span>[<span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">G</span>[<span style="color: #00008b;">_</span>]] {
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">apply</span>[<span style="color: #6b8e23;">A</span>]<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>[<span style="color: #6b8e23;">F</span>[<span style="color: #6b8e23;">A</span>], <span style="color: #6b8e23;">G</span>[<span style="color: #6b8e23;">A</span>]]
}
</pre>
</div>

<p>
Hask èŒƒç•´ä¸Šçš„è‡ªç„¶å˜åŒ–å°±å˜æˆäº†
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">type</span> <span style="color: #36648b;">NatHask</span> f g <span style="color: #b8860b;">=</span> f a <span style="color: #b8860b;">-&gt;</span> g a
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">trait</span> <span style="color: #36648b;">NatHask</span>[<span style="color: #6b8e23;">F</span>[<span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">G</span>[<span style="color: #00008b;">_</span>]] {
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">apply</span>[<span style="color: #6b8e23;">A</span>]<span style="color: #00008b;">:</span> <span style="color: #36648b;">F</span>[<span style="color: #6b8e23;">A</span>] <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">G</span>[<span style="color: #6b8e23;">A</span>]
}

</pre>
</div>

<p>
æœ‰è¶£çš„æ˜¯, è¿˜å¯ä»¥ç»§ç»­å‡ç»´åº¦, æ¯”å¦‚
</p>

<ul class="org-ul">
<li>ä¸œè¥¿æ˜¯å‡½å­</li>
<li>ç®­å¤´æ˜¯è‡ªç„¶å˜æ¢</li>
</ul>

<p>
æ­å–œä½ åˆ°è¾¾ Functor èŒƒç•´.
</p>

<p>
å½“ç„¶, è¦æˆä¸ºèŒƒç•´ï¼Œè¿˜æœ‰ä¸¤ä¸ªå±æ€§:
</p>
<ul class="org-ul">
<li>id ä¸º f a åˆ° f a çš„è‡ªç„¶å˜æ¢</li>
<li>è‡ªç„¶å˜æ¢çš„ç»„åˆ</li>
</ul>


<figure>
<object type="image/svg+xml" data="images/functor-category.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>

</figure>

<p>
åˆ«ç€æ€¥, æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹ï¼Œå¦‚æœå·²ç»ä¸çŸ¥é“å‡äº†å‡ ä¸ªç»´åº¦äº†ï¼Œæˆ‘ä»¬å‡è®¾ç±»å‹æ‰€åœ¨èŒƒç•´æ˜¯ç¬¬ä¸€ç»´åº¦
</p>
<ul class="org-ul">
<li>ä¸€ç»´ï¼š Haskï¼Œ ä¸œè¥¿æ˜¯ç±»å‹ï¼Œç®­å¤´æ˜¯ -&gt;</li>
<li>äºŒç»´ï¼š Catï¼Œ ä¸œè¥¿æ˜¯ Haskï¼Œ ç®­å¤´æ˜¯ Functor</li>
<li>ä¸‰ç»´ï¼š FunctorèŒƒç•´ï¼Œ ä¸œè¥¿æ˜¯Functorï¼Œ ç®­å¤´æ˜¯è‡ªç„¶å˜æ¢</li>
</ul>

<p>
æ„Ÿè§‰åˆ°è¾¾ä¸‰ç»´å·²ç»æ˜¯æé™äº†ï¼Œå°¼ç›è¿˜æœ‰å®Œæ²¡å®Œäº†ï¼Œæ¯å‡ä¸€ä¸ªç»´åº¦è¿˜è¦èµ·è¿™ä¹ˆå¤šè£…é€¼çš„åå­—ï¼Œå†å‡ç»´åº¦è€å­å°±ç”»ä¸å‡ºæ¥äº†
</p>

<p>
æ‰€ä»¥è¿™æ—¶å€™, éœ€è¦å¼•å…¥ String Diagramã€‚
</p>
</div>
</div>

<div id="outline-container-org55c5c26" class="outline-3">
<h3 id="org55c5c26">String Diagram</h3>
<div class="outline-text-3" id="text-org55c5c26">
<p>
String Diagram çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œå°±æ˜¯ç‚¹å˜çº¿çº¿å˜ç‚¹ã€‚
</p>

<p>
è¿˜è®°å¾—å½“æœ‰äº†è‡ªç„¶å˜æ¢ä¹‹åï¼Œä¸‰ä¸ªç»´åº¦å·²ç»æ²¡æ³•è¡¨ç¤ºäº†ï¼Œé‚£åŸæ¥çš„ç‚¹å’Œçº¿éƒ½å‡ä¸€ç»´åº¦ï¼Œå˜æˆçº¿å’Œé¢ï¼Œè¿™æ ·ï¼Œå°±è…¾å‡ºä¸€ä¸ªç‚¹æ¥è¡¨ç¤ºè‡ªç„¶å˜æ¢äº†ã€‚
</p>


<figure>
<img src="images/p1-string-diagram.png" alt="p1-string-diagram.png">

<figcaption><span class="figure-number">Figure 5: </span>String Diagramï¼šè‡ªç„¶å˜æ¢æ˜¯ç‚¹ï¼ŒFunctoræ˜¯çº¿ï¼ŒèŒƒç•´æ˜¯é¢</figcaption>
</figure>

<p>
composeçš„æ–¹å‘æ˜¯ä»å³å¾€å·¦ï¼Œä»ä¸‹åˆ°ä¸Šã€‚
</p>
</div>
</div>

<div id="outline-container-org02ba778" class="outline-3">
<h3 id="org02ba778"><i>Adjunction Functor</i> ä¼´éšå‡½å­</h3>
<div class="outline-text-3" id="text-org02ba778">
<p>
èŒƒç•´Cå’ŒDç›´æ¥æœ‰æ¥æœ‰å›çš„å‡½å­ï¼Œä¸ºä»€ä¹ˆè¦ä»‹ç»è¿™ä¸ªï¼Œå› ä¸ºå®ƒç›´æ¥å¯ä»¥æ¨å‡º Monad
</p>

<p>
è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä»€ä¹ˆå«æœ‰æ¥å›ã€‚
</p>


<figure>
<img src="images/p1-adjunction-functor.png" alt="p1-adjunction-functor.png">

</figure>

<p>
å…¶ä¸­ï¼š
</p>

<ul class="org-ul">
<li>ä¸€ä¸ªèŒƒç•´ C å¯ä»¥é€šè¿‡å‡½å­ G åˆ° Dï¼Œå†é€šè¿‡å‡½å­ F å›åˆ° Cï¼Œé‚£ä¹ˆ F å’Œ G å°±æ˜¯ä¼´éšå‡½å­ã€‚</li>
<li>&eta; æ˜¯ GF åˆ° 1<sub>D</sub> çš„è‡ªç„¶å˜æ¢</li>
<li>&epsilon; æ˜¯ 1<sub>C</sub> åˆ° FG çš„è‡ªç„¶å˜æ¢</li>
</ul>

<p>
åŒæ—¶æ ¹æ®åŒæ„çš„å®šä¹‰ï¼ŒG ä¸ F æ˜¯ <i>åŒæ„</i> çš„ã€‚
</p>
<p>
åŒæ„æŒ‡çš„æ˜¯è‹¥æ˜¯æœ‰
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6a5acd;">f</span> <span style="color: #b8860b;">::</span> a <span style="color: #b8860b;">-&gt;</span> b
f'<span style="color: #b8860b;">::</span> b <span style="color: #b8860b;">-&gt;</span> a
</pre>
</div>

<p>
é‚£ä¹ˆ f ä¸ f' åŒæ„ï¼Œå› ä¸º f . f' = id = f' . f
</p>

<p>
ä¼´éšå‡½å­çš„ FG ç»„åˆæ˜¯ C èŒƒç•´çš„ id å‡½å­ F . G = 1<sub>c</sub>
</p>


<figure>
<img src="images/p1-ajunction-functor-compose.png" alt="p1-ajunction-functor-compose.png">

<figcaption><span class="figure-number">Figure 7: </span>ä¼´éšå‡½å­çš„ä¸¤ä¸ªFunctorç»„åˆ, å·¦ä¾§ä¸º F &eta;, å³ä¾§ä¸º &epsilon; F</figcaption>
</figure>

<p>
Functor ä¸ä»…æ¨ªç€å¯ä»¥ç»„åˆï¼Œç«–ç€(è‡ªç„¶å˜æ¢ç»´åº¦)ä¹Ÿæ˜¯å¯ä»¥ç»„åˆçš„ï¼Œå› ä¸ºè‡ªç„¶å˜æ¢æ˜¯ Functor èŒƒç•´çš„ç®­å¤´ã€‚
</p>


<figure>
<img src="images/p1-ajunction-functor-compose-nat.png" alt="p1-ajunction-functor-compose-nat.png">

<figcaption><span class="figure-number">Figure 8: </span>F &eta; . &epsilon; F  = F</figcaption>
</figure>

<p>
å½“åˆ°ç»„åˆ F &eta; . &epsilon; F å¾—åˆ°ä¸€ä¸ªå¼¯å¼¯æ›²æ›²çš„ F æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹½ç€Fçš„ä¸¤æ®µä¸€æ‹‰ï¼Œå°±å¾—åˆ°äº†ç›´çš„ Fã€‚
</p>

<p>
String Diagram ç¥å¥‡çš„åœ°æ–¹æ˜¯æ‰€æœ‰çº¿éƒ½å¯ä»¥æ‹‰ä¸Šä¸‹ä¸¤ç«¯ï¼Œè¿™ä¸ªæŠ€å·§éå¸¸æœ‰ç”¨ï¼Œåœ¨ä¹‹åçš„å•å­æ¨å¯¼è¿˜éœ€è¦ç”¨åˆ°ã€‚
</p>
</div>
</div>

<div id="outline-container-org157f17f" class="outline-3">
<h3 id="org157f17f">ä»ä¼´éšå‡½å­åˆ° <ruby>å•å­<rt> Monad</rt></ruby></h3>
<div class="outline-text-3" id="text-org157f17f">
<p>
æœ‰äº†ä¼´éšå‡½å­ï¼Œå¾ˆå®¹æ˜“æ¨å‡ºå•å­ï¼Œè®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯å•å­
</p>

<ul class="org-ul">
<li>é¦–å…ˆï¼Œå®ƒæ˜¯ä¸€ä¸ª endofunctor T</li>
<li>æœ‰ä¸€ä¸ªä» i<sub>c</sub> åˆ° T çš„è‡ªç„¶å˜åŒ– &eta; (eta)</li>
<li>æœ‰ä¸€ä¸ªä» T<sup>2</sup> åˆ° T çš„è‡ªç„¶å˜åŒ– &mu; (mu)</li>
</ul>


<figure>
<img src="images/p1-monad-properties.png" alt="p1-monad-properties.png">

</figure>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">class</span> <span style="color: #36648b;">Endofunctor</span> c t <span style="color: #b8860b;">=&gt;</span> <span style="color: #36648b;">Monad</span> c t <span style="color: #00008b;">where</span>
  eta <span style="color: #b8860b;">::</span> c a (t a)
  mu  <span style="color: #b8860b;">::</span> c (t (t a)) (t a)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">trait</span> <span style="color: #36648b;">Monad</span>[<span style="color: #6b8e23;">C</span>[<span style="color: #00008b;">_</span>, <span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>]]] <span style="color: #00008b;">extends</span> <span style="color: #36648b;">Endofunctor</span>[<span style="color: #6b8e23;">C</span>, <span style="color: #6b8e23;">T</span>] {
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">eta</span>[<span style="color: #6b8e23;">A</span>]<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>[<span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">A</span>]]
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">mu</span>[<span style="color: #6b8e23;">A</span>]<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">A</span>]], <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">A</span>]]
}
</pre>
</div>
<p>
åŒæ ·ï¼ŒæŠŠ c = Hask æ›¿æ¢è¿›å»ï¼Œå°±å¾—åˆ°æ›´ç±»ä¼¼æˆ‘ä»¬ Haskell ä¸­ Monad çš„å®šä¹‰
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">class</span> <span style="color: #36648b;">Endofunctor</span> m <span style="color: #b8860b;">=&gt;</span> <span style="color: #36648b;">Monad</span> m <span style="color: #00008b;">where</span>
  eta <span style="color: #b8860b;">::</span> a <span style="color: #b8860b;">-&gt;</span> (m a)
  mu <span style="color: #b8860b;">::</span> m m a <span style="color: #b8860b;">-&gt;</span> m a
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">trait</span> <span style="color: #36648b;">Monad</span>[<span style="color: #6b8e23;">M</span>[<span style="color: #00008b;">_</span>]] <span style="color: #00008b;">extends</span> <span style="color: #36648b;">Endofunctor</span>[<span style="color: #6b8e23;">M</span>] {
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">eta</span>[<span style="color: #6b8e23;">A</span>]<span style="color: #00008b;">:</span> <span style="color: #36648b;">A</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">M</span>[<span style="color: #6b8e23;">A</span>]
  <span style="color: #00008b;">def</span> <span style="color: #6a5acd;">mu</span>[<span style="color: #6b8e23;">A</span>]<span style="color: #00008b;">:</span> <span style="color: #36648b;">M</span>[<span style="color: #6b8e23;">M</span>[<span style="color: #6b8e23;">A</span>]] <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">M</span>[<span style="color: #6b8e23;">A</span>]
}
</pre>
</div>
<p>
è¦æ¨å‡ºå•å­çš„ &eta; å˜æ¢ï¼Œåªéœ€è¦è®© FG = T
</p>

<figure>
<img src="images/p1-ajunction-functor-to-monad-eta.png" alt="p1-ajunction-functor-to-monad-eta.png">

<figcaption><span class="figure-number">Figure 10: </span>ä¼´éšå‡½å­çš„ &epsilon; å°±æ˜¯å•å­çš„ &eta;</figcaption>
</figure>

<p>
åŒæ ·çš„ï¼Œå½“ FG = T, F &eta; G å°±å¯ä»¥å˜æˆ &mu;
</p>

<figure>
<img src="images/p1-ajunction-functor-to-monad-mu.png" alt="p1-ajunction-functor-to-monad-mu.png">

<figcaption><span class="figure-number">Figure 11: </span>ä¼´éšå‡½å­çš„ F &eta; G æ˜¯å‡½å­çš„ &mu;</figcaption>
</figure>
</div>

<div id="outline-container-orgca7d5a1" class="outline-4">
<h4 id="orgca7d5a1">ä¸‰è§’ç­‰å¼</h4>
<div class="outline-text-4" id="text-orgca7d5a1">
<p>
ä¸‰è§’ç­‰å¼æ˜¯æŒ‡ &mu; . T &eta; = T = &mu; . &eta; T
</p>

<p>
è¦æ¨å‡ºä¸‰è§’ç­‰å¼åªéœ€è¦ç»„åˆ F &eta; G å’Œ &epsilon; F G
</p>

<figure>
<img src="images/p1-adjunction-functor-triangle.png" alt="p1-adjunction-functor-triangle.png">

<figcaption><span class="figure-number">Figure 12: </span>F &eta; G  . &epsilon; F G = F G</figcaption>
</figure>

<figure>
<img src="images/p1-monad-triangle.png" alt="p1-monad-triangle.png">

<figcaption><span class="figure-number">Figure 13: </span>F &eta; G  . &epsilon; F G= F G å¯¹åº”åˆ°Monadå°±æ˜¯ &mu; . &eta; T = T</figcaption>
</figure>

<p>
æ¢åˆ°ä»£ç ä¸Šæ¥è¯´
</p>
<div class="org-src-container">
<pre class="src src-haskell">(mu <span style="color: #b8860b;">.</span> eta) m <span style="color: #b8860b;">=</span> m
</pre>
</div>

<p>
åŒæ ·çš„ï¼Œå·¦å³ç¿»è½¬ä¹Ÿæˆç«‹
</p>


<figure>
<img src="images/p1-adjunction-functor-triangle-reverse.png" alt="p1-adjunction-functor-triangle-reverse.png">

<figcaption><span class="figure-number">Figure 14: </span>F &eta; G . F G &epsilon; = F G</figcaption>
</figure>
<p>
<img src="images/p1-monad-triangle-reverse.png" alt="p1-monad-triangle-reverse.png">
T &eta; å°±æ˜¯ fmap eta
</p>
<div class="org-src-container">
<pre class="src src-haskell">(mu <span style="color: #b8860b;">.</span> fmap eta) m <span style="color: #b8860b;">=</span> m
</pre>
</div>

<p>
å¦‚æœæŠŠ <code>mu . fmap</code> å†™æˆ <code>&gt;&gt;=</code> , å°±æœ‰äº†
</p>

<div class="org-src-container">
<pre class="src src-haskell">m <span style="color: #6a5acd;">&gt;&gt;=</span> eta <span style="color: #b8860b;">=</span> m
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf2a5830" class="outline-4">
<h4 id="orgf2a5830">ç»“åˆå¾‹</h4>
<div class="outline-text-4" id="text-orgf2a5830">
<p>
å•å­å¦ä¸€å¤§å®šå¾‹æ˜¯ç»“åˆå¾‹ï¼Œè®©æˆ‘ä»¬ä»ä¼´éšå‡½å­æ¨èµ·
</p>

<p>
å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰å‡½å­ F &eta; G å’Œ å‡½å­ F &eta; G F G, compose èµ·æ¥ä¼šå˜æˆ  F &eta; G . F &eta; G F G
<img src="images/p1-ajunction-functor-monad-laws-1.png" alt="p1-ajunction-functor-monad-laws-1.png">
</p>

<p>
ç”¨ F G = T ï¼Œ F &eta; G = &mu; ä»£æ¢é‚£ä¹ˆå°±å¾—åˆ°äº†å•å­çš„ &mu; . &mu; T
<img src="images/p1-ajunction-functor-monad-laws-2.png" alt="p1-ajunction-functor-monad-laws-2.png">
</p>

<p>
å½“ç»„åˆ F &eta; G å’Œ F G F &mu; G åï¼Œä¼šå¾—åˆ°ä¸€ä¸ªé•œåƒçš„å›¾
<img src="images/p1-ajunction-functor-monad-laws-3.png" alt="p1-ajunction-functor-monad-laws-3.png">
</p>

<p>
å¯¹åº”åˆ°å•å­çš„ &mu; . T &mu;
</p>

<p>
ç»“åˆå¾‹æ˜¯è¯´ &mu; . &mu; T = &mu; . T &mu; , å³å›¾å·¦å³ç¿»è½¬ç»“æœæ˜¯ç›¸ç­‰çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿçœ‹å•å­çš„String Diagram ä¸å¤ªå¥½çœ‹å‡ºæ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¼´éšå‡½å­
</p>

<p>
å¦‚æœæŠŠå·¦å›¾çš„å·¦è¾¹çš„ &mu; å¾€ä¸ŠæŒªä¸€ç‚¹ï¼Œå³è¾¹çš„ &mu; å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œæ˜¯ä¸æ˜¯è·Ÿå³å›¾å°±ä¸€æ ·äº†
<img src="images/p1-ajunction-functor-monad-laws-4.png" alt="p1-ajunction-functor-monad-laws-4.png">
</p>

<p>
ç»“åˆå¾‹åæ˜ åˆ°ä»£ç ä¸­å°±æ˜¯
</p>
<div class="org-src-container">
<pre class="src src-haskell">mu <span style="color: #6a5acd;">.</span> fmap mu <span style="color: #b8860b;">=</span> mu <span style="color: #b8860b;">.</span> mu
</pre>
</div>

<p>
ä»£ç å¾ˆéš¾çœ‹å‡ºç»“åˆåœ¨å“ªé‡Œï¼Œå› ä¸ºæ­£å¸¸çš„ç»“åˆå¾‹åº”è¯¥æ˜¯è¿™æ ·çš„ (1+2)+3 = 1+(2+3)ï¼Œä½†æ˜¯ä¸æƒ³åŠ æ³•çš„ç»´åº¦ä¸ä¸€æ ·ï¼Œè¿™é‡Œè¯´çš„æ˜¯è‡ªç„¶å˜æ¢ç»´åº¦çš„ç»“åˆï¼Œå¯ä»¥é€šè¿‡String Diagram å¾ˆæ¸…æ¥šçš„çœ‹è§ç»“åˆçš„è¿‡ç¨‹ï¼Œå³ &mu; å·¦è¾¹çš„ä¸¤ä¸ªTå’Œå…ˆ &mu; å³è¾¹ä¸¤ä¸ª T æ˜¯ç›¸ç­‰çš„ã€‚
</p>
</div>
</div>
</div>

<div id="outline-container-org1a754d9" class="outline-3">
<h3 id="org1a754d9">Yoneda lemma / <del>ç±³ç”°å…±</del> ç±³ç”°å¼•ç†</h3>
<div class="outline-text-3" id="text-org1a754d9">
<p>
ç±³ç”°å¼•ç†æ˜¯è¯´æ‰€æœ‰Functor <code>f a</code> ä¸€å®šå­˜åœ¨ embed å’Œ unembedï¼Œä½¿å¾— <code>f a</code> å’Œ <code>(a -&gt; b) -&gt; F b</code> isomorphic åŒæ„
</p>

<p>
haskellè¿˜è¦å…ˆæ‰“å¼€ RankNTypes çš„ feature
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #228b22;">{-# LANGUAGE RankNTypes #-}</span>

<span style="color: #6a5acd;">embed</span> <span style="color: #b8860b;">::</span> <span style="color: #36648b;">Functor</span> f <span style="color: #b8860b;">=&gt;</span> f a <span style="color: #b8860b;">-&gt;</span> (<span style="color: #00008b;">forall</span> b <span style="color: #b8860b;">.</span> (a <span style="color: #b8860b;">-&gt;</span> b) <span style="color: #b8860b;">-&gt;</span> f b)
<span style="color: #6a5acd;">embed</span> x f <span style="color: #b8860b;">=</span> fmap f x

<span style="color: #6a5acd;">unembed</span> <span style="color: #b8860b;">::</span> <span style="color: #36648b;">Functor</span> f <span style="color: #b8860b;">=&gt;</span> (<span style="color: #00008b;">forall</span> b <span style="color: #b8860b;">.</span> (a <span style="color: #b8860b;">-&gt;</span> b) <span style="color: #b8860b;">-&gt;</span> f b) <span style="color: #b8860b;">-&gt;</span> f a
<span style="color: #6a5acd;">unembed</span> f <span style="color: #b8860b;">=</span> f id
</pre>
</div>

<p>
Scala è¯­è¨€æ²¡æœ‰ Rank N Typeæ”¯æŒ, ä½†æ˜¯ <a href="#orgb1490d8"><ruby>è‡ªç„¶å˜æ¢<rt>Natural Transformations</rt></ruby></a> æåˆ°è¿‡å¯ä»¥ç”¨ <code>apply</code> æ¥æ¨¡æ‹Ÿ. å…¶å®å¯ä»¥ä½¿ç”¨ Cats çš„ <a href="https://typelevel.org/cats/datatypes/functionk.html">FunctionK(~&gt;)</a> æ›´æ–¹ä¾¿:
</p>
<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">def</span> <span style="color: #6a5acd;">embed</span>[<span style="color: #6b8e23;">F</span>[<span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">A</span>](fa<span style="color: #00008b;">:</span> <span style="color: #36648b;">F</span>[<span style="color: #6b8e23;">A</span>])(<span style="color: #228b22;">implicit</span> f<span style="color: #00008b;">:</span> <span style="color: #36648b;">Functor</span>[<span style="color: #6b8e23;">F</span>])<span style="color: #00008b;">:</span> (<span style="color: #6b8e23;">A</span> <span style="color: #00008b;">=&gt;</span> ?) ~&gt; <span style="color: #6b8e23;">F</span> <span style="color: #00008b;">=</span>
  <span style="color: #6b8e23;">Lambda</span>[(<span style="color: #6b8e23;">A</span> <span style="color: #00008b;">=&gt;</span> ?) ~&gt; <span style="color: #6b8e23;">F</span>](f.fmap(<span style="color: #00008b;">_</span>)(fa))
<span style="color: #00008b;">def</span> <span style="color: #6a5acd;">unembed</span>[<span style="color: #6b8e23;">F</span>[<span style="color: #00008b;">_</span>]](fnk<span style="color: #00008b;">:</span> (<span style="color: #6b8e23;">A</span> <span style="color: #00008b;">=&gt;</span> ?) ~&gt; <span style="color: #6b8e23;">F</span>)<span style="color: #00008b;">:</span> <span style="color: #36648b;">F</span>[<span style="color: #6b8e23;">A</span>] <span style="color: #00008b;">=</span>
  fnk(identity)
</pre>
</div>

<p>
embed å¯ä»¥æŠŠ functor <code>f a</code> å˜æˆ <code>(a -&gt; b) -&gt; f b</code>
</p>

<p>
unembed æ˜¯åè¿‡æ¥ï¼Œ <code>(a -&gt; b) -&gt; f b</code> å˜æˆ <code>f a</code>
</p>

<p>
ä¸Šä¸ªå›¾å°±æ˜ç™½äº†
</p>

<figure>
<object type="image/svg+xml" data="images/yoneda-lemma.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>

<figcaption><span class="figure-number">Figure 15: </span>ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾ä¸­æ— è®ºçŸ¥é“a-&gt;b å†åŠ ä¸Šä»»æ„ä¸€ä¸ª F xï¼Œéƒ½èƒ½æ¨å‡ºå¦å¤–ä¸€ä¸ª F</figcaption>
</figure>
</div>

<div id="outline-container-orgade6eef" class="outline-4">
<h4 id="orgade6eef">Rank N Type</h4>
<div class="outline-text-4" id="text-orgade6eef">
<p>
è¯´å¥½çš„è¦è§£é‡Š Rank N Type
</p>

<p>
Haskell ä¸­å¯ä»¥ä¸ç”¨å£°æ˜ç±»å‹, ä½†æ˜¯å…¶å®æ˜¯çœç•¥æ‰ universally quantified <code>forall</code>, å¦‚æœæŠŠ forall å…¨éƒ¨åŠ å›æ¥,
å°±æ˜äº†å¾ˆå¤š:
</p>

<ul class="org-ul">
<li>Monomorphic Rank 0 / 0çº§å•æ€<label for="7" class="margin-toggle sidenote-number"></label><input type="checkbox" id="7" class="margin-toggle"/><span class="sidenote">
ä¹Ÿå°±ä¸æ˜¯ä¸å˜æ€
</span>: t</li>
<li>Polymorphic Rank 1 / 1çº§ <del>å˜æ€</del> å¤šæ€: forall a b. a -&gt; b</li>
<li>Polymorphic Rank 2 / 2çº§å¤šæ€: forall c. (forall a b. a -&gt; b) -&gt; c</li>
<li>Polymorphic Rank 3 / 3çº§å¤šæ€: forall d . (forall c . (forall a b . a -&gt; b) -&gt; c) -&gt; d</li>
</ul>

<p>
çœ‹ rank å‡ åªè¦æ•°å·¦è¾¹ forall çš„ä¸ªæ•°å°±å¥½äº†.
</p>

<p>
ä¸€çº§å¤šæ€åªé”å®šä¸€æ¬¡ç±»å‹ a å’Œ b
</p>

<p>
äºŒçº§å¤šæ€å¯ä»¥åˆ†ä¸¤æ¬¡ç¡®å®šç±»å‹, ç¬¬ä¸€æ¬¡ç¡®å®š c, ç¬¬äºŒæ¬¡ç¡®å®š a b
</p>

<p>
ä¸‰çº§å¤šå°åˆ†ä¸‰æ¬¡: ç¬¬ä¸€æ¬¡ d, ç¬¬äºŒæ¬¡ c, ç¬¬ä¸‰æ¬¡ a b
</p>

<p>
æ¯”å¦‚:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6a5acd;">rank2</span> <span style="color: #b8860b;">::</span> <span style="color: #00008b;">forall</span> b c <span style="color: #b8860b;">.</span> b <span style="color: #b8860b;">-&gt;</span> c <span style="color: #b8860b;">-&gt;</span> (<span style="color: #00008b;">forall</span> a<span style="color: #b8860b;">.</span> a <span style="color: #b8860b;">-&gt;</span> a) <span style="color: #b8860b;">-&gt;</span> (b, c)
<span style="color: #6a5acd;">rank2</span> b c f <span style="color: #b8860b;">=</span> (f b, f c)

<span style="color: #6a5acd;">rank2</span> <span style="color: #36648b;">True</span> <span style="color: #8b0000;">'a'</span> id
<span style="color: #8c8c8c; font-style: italic;">-- </span><span style="color: #8c8c8c; font-style: italic;">(True, 'a')</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">def</span> <span style="color: #6a5acd;">rank2</span>[<span style="color: #6b8e23;">B</span>, <span style="color: #6b8e23;">C</span>](b<span style="color: #00008b;">:</span> <span style="color: #36648b;">B</span>, c<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>)(fnk<span style="color: #00008b;">:</span> <span style="color: #36648b;">Id</span> ~&gt; <span style="color: #6b8e23;">Id</span>)<span style="color: #00008b;">:</span> (<span style="color: #6b8e23;">B</span>, <span style="color: #6b8e23;">C</span>) <span style="color: #00008b;">=</span>
  (fnk(b), fnk(c))
rank2(<span style="color: #6b8e23;">true</span>, <span style="color: #8b0000;">'a'</span>)(<span style="color: #6b8e23;">FunctionK</span>.id[<span style="color: #6b8e23;">Id</span>])
</pre>
</div>

<ul class="org-ul">
<li>f åœ¨ <code>f True</code> æ—¶ç±»å‹ <code>Boolean -&gt; Boolean</code> æ˜¯ç¬¦åˆ <code>forall a. a-&gt;a</code> çš„</li>
<li>ä¸æ­¤åŒæ—¶ <code>f 'a'</code> æ—¶ç±»å‹ç¡®å®æ˜¯ <code>Char -&gt; Char</code> ä½†ä¹Ÿç¬¦åˆ <code>forall a. a-&gt;a</code></li>
</ul>

<p>
å¦‚æœæ˜¯ rank1 ç±»å‹ç³»ç»Ÿå°±æ‡µé€¼äº†:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6a5acd;">rank1</span> <span style="color: #b8860b;">::</span> <span style="color: #00008b;">forall</span> a b c <span style="color: #b8860b;">.</span> b <span style="color: #b8860b;">-&gt;</span> c <span style="color: #b8860b;">-&gt;</span> (a <span style="color: #b8860b;">-&gt;</span> a) <span style="color: #b8860b;">-&gt;</span> (b, c)
<span style="color: #6a5acd;">rank1</span> b c f <span style="color: #b8860b;">=</span> (f b, f c)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">def</span> <span style="color: #6a5acd;">rank1</span>[<span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">B</span>, <span style="color: #6b8e23;">C</span>](b<span style="color: #00008b;">:</span> <span style="color: #36648b;">B</span>, c<span style="color: #00008b;">:</span> <span style="color: #36648b;">C</span>)(fn<span style="color: #00008b;">:</span> <span style="color: #36648b;">A</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">A</span>)<span style="color: #00008b;">:</span> (<span style="color: #6b8e23;">B</span>, <span style="color: #6b8e23;">C</span>) <span style="color: #00008b;">=</span>
  (fn(b), fn(c))
</pre>
</div>
<p>
f åœ¨ <code>f True</code> æ˜¯ç¡®å®š a æ˜¯ Booleanï¼Œåœ¨rank1å¤šæ€æ˜¯æ—¶å°±ç¡®å®šäº† <code>a-&gt;a</code> çš„ç±»å‹ä¸€å®šæ˜¯ <code>Boolean -&gt; Boolean</code>
</p>

<p>
æ‰€ä»¥åˆ° <code>f 'a'</code> ç±»å‹å°±æŒ‚äº†ã€‚
</p>
</div>
</div>
</div>

<div id="outline-container-org0fb6f6c" class="outline-3">
<h3 id="org0fb6f6c">Kan extensions çœ‹å±•</h3>
<div class="outline-text-3" id="text-org0fb6f6c">
<p>
è¯´åˆ°ç±³ç”°å¼•ç†, ä¸å¾—ä¸æåˆ°ä¸€åˆ‡æ¦‚å¿µçš„æ ¹æº <ruby>çœ‹å±•<rt>kan extensions</rt></ruby>
</p>

<div class="epigraph"><blockquote>
<p>
All Concepts Are Kan Extensions
The notion of Kan extensions subsumes all the other fundamental concepts of category theory.
&#x2013; <a href="https://en.wikipedia.org/wiki/Categories_for_the_Working_Mathematician">Categories for the Working Mathematician</a> by Saunders Mac Lane
</p>

</blockquote></div>
<p>
çœ‹å±•æœ‰ä¸€å¯¹(duel), <ruby>å·¦çœ‹<rt> Lan</rt></ruby>,å’Œ <ruby>å³çœ‹<rt> Ran</rt></ruby>, ä¸å¦‚ä» å³çœ‹ å¼€å§‹, è¶ç€ç±³ç”°å…±è¿˜æ²¡å‡‰.
</p>

<p>
å³çœ‹çš„å¤§æ¦‚æ„æ€æ˜¯è¿™æ ·çš„, è¯´æœ‰:
</p>

<ul class="org-ul">
<li>ä¸‰ä¸ªèŒƒç•´, A, B, C</li>
<li>èŒƒç•´ä¹‹é—´æœ‰ä¸¤ä¸ªå‡½å­, AC èŒƒç•´çš„ <code>X</code> å’Œ AB èŒƒç•´çš„ <code>F</code></li>
</ul>

<p>
é‚£ä¹ˆå°±ä¸€å®šä¸€ä¸ª BC çš„å‡½å­ Ran<sub>F</sub>X å’Œ ä» Ran<sub>F</sub>X compose F åˆ° X çš„ è‡ªç„¶å˜æ¢ &mu;
</p>

<p>
æ–‡å­—ç¡®å®å¾ˆç»•, è®©æˆ‘ä»¬çœ‹çœ‹çº¿å›¾, å°±å¾ˆæ¸…æ¥š.
</p>
</div>

<div id="outline-container-org043688b" class="outline-4">
<h4 id="org043688b"><span class="todo TODO">TODO</span> insert diagram</h4>
<div class="outline-text-4" id="text-org043688b">
<p>
è¿˜æ˜¯çº¿å›¾ç¥å¥‡å§, å¾ˆæ˜æ˜¾å¦‚æœæœ‰ X å’Œ F å’Œ ä¸‰ä¸ªèŒƒç•´, é‚£è‚¯å®šå¯ä»¥æ‰¾åˆ° Ran<sub>FX</sub> å’Œ è‡ªç„¶å˜æ¢æŠŠå›¾è¡¥æˆè¿™ä¸ªæ ·å­:
</p>
</div>
</div>

<div id="outline-container-org77bbe66" class="outline-4">
<h4 id="org77bbe66"><span class="todo TODO">TODO</span> insert diagram</h4>
<div class="outline-text-4" id="text-org77bbe66">
<p>
é‚£ä¹ˆé—®é¢˜æ¥äº†, è¿™è´§åˆ°åº•æ˜¯
</p>

<p>
å³çœ‹è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å±æ€§æ˜¯:
</p>

<p>
å¯¹äºä»»æ„ BC çš„å‡½å­ Z å¦‚æœèƒ½æ‰¾åˆ°ä» Z . F ~&gt; X çš„è‡ªç„¶å˜æ¢, é‚£å°±å­˜åœ¨ä¸€ä¸ªå”¯ä¸€çš„ä» Z ~&gt; Ran<sub>F</sub>X çš„è‡ªç„¶å˜æ¢
</p>

<p>
é‚£ä¹ˆè¡¨ç¤ºæˆä»£ç åº”è¯¥é•¿ä»€ä¹ˆæ ·å‘¢? æ—¢ç„¶ Z ~&gt; Ran<sub>F</sub>X åªå­˜åœ¨ä¸€ä¸ªè‡ªç„¶å˜æ¢,é‚£ä¹ˆæˆ‘ä»¬æ‰¾åˆ° Z ä¸å°±æ‰¾åˆ°äº† Ran<sub>F</sub>X?
</p>

<ul class="org-ul">
<li>Z . F ~&gt; X : <code>forall b. z (f b) -&gt; x b</code></li>
<li>Z ~&gt; Ran<sub>F</sub>X : <code>forall a. z a -&gt; Ran f x a</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6a5acd;">ran</span> <span style="color: #b8860b;">::</span> <span style="color: #00008b;">forall</span> z<span style="color: #b8860b;">.</span> <span style="color: #36648b;">Functor</span> z <span style="color: #b8860b;">=&gt;</span> (<span style="color: #00008b;">forall</span> b<span style="color: #b8860b;">.</span> z (f b) <span style="color: #b8860b;">-&gt;</span> x b) <span style="color: #b8860b;">-&gt;</span> (<span style="color: #00008b;">forall</span> a<span style="color: #b8860b;">.</span> z a <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">Ran</span> f x a)
</pre>
</div>

<p>
å¦‚æœæŠŠ <code>Ran f x a</code> æ‹¿åˆ°å·¦è¾¹æ¥å®šä¹‰æˆ data type é‚£ä¹ˆå°±æœ‰:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">data</span> <span style="color: #36648b;">Ran</span> f x a <span style="color: #b8860b;">=</span> forall z<span style="color: #b8860b;">.</span> <span style="color: #36648b;">Functor</span> z <span style="color: #b8860b;">=&gt;</span> <span style="color: #36648b;">Ran</span> (forall b<span style="color: #b8860b;">.</span> z (f b) <span style="color: #b8860b;">-&gt;</span> x b) (z a)
</pre>
</div>

<p>
è¯»å‡ºæ¥å¾ˆæ¸…æ¥šå§, éšä¾¿ç»™ä¸ªå‡½å­ z, Ran f x a å°±å¯ä»¥ä» z . f åˆ° x çš„è‡ªç„¶å˜æ¢ å’Œ z æ‰¾åˆ°.
</p>

<p>
è¿™ä¸ªå®šä¹‰æœ‰ rank 3, åˆ†åˆ«æ˜¯ a, b å’Œ z.
ä½†æ˜¯çœŸæ­£çš„ Edward Kmett çš„ <a href="http://hackage.haskell.org/package/kan-extensions-5.2">çœ‹å±•å®ç°</a> æ˜¯ç®€åŒ–ä¸º rank 2 type ç‰ˆæœ¬çš„, åªæœ‰ a, b ä¸¤ rank, è®©æˆ‘ä»¬çœ‹ä¸‹ä»–çš„å®šä¹‰:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #00008b;">newtype</span> <span style="color: #36648b;">Ran</span> f x a <span style="color: #b8860b;">=</span> <span style="color: #36648b;">Ran</span> { runRan <span style="color: #b8860b;">::</span> <span style="color: #00008b;">forall</span> b<span style="color: #b8860b;">.</span> (a <span style="color: #b8860b;">-&gt;</span> f b) <span style="color: #b8860b;">-&gt;</span> x b }
</pre>
</div>

<p>
å…ˆæ¥çœ‹çœ‹ &mu;
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6a5acd;">toRan</span> <span style="color: #b8860b;">::</span> <span style="color: #36648b;">Functor</span> z <span style="color: #b8860b;">=&gt;</span> (<span style="color: #00008b;">forall</span> b<span style="color: #b8860b;">.</span> z (f b) <span style="color: #b8860b;">-&gt;</span> x b) <span style="color: #b8860b;">-&gt;</span> (z a <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">Ran</span> f x a)
<span style="color: #6a5acd;">toRan</span> s t <span style="color: #b8860b;">=</span> <span style="color: #36648b;">Ran</span> (s <span style="color: #b8860b;">.</span> flip fmap t)
</pre>
</div>

<p>
è¿™æ˜¯point free æˆ‘ä»¬ä»å³è¾¹å¼€å§‹èµ°, Ran é‡Œé¢æ˜¯ä¸ªå‡½æ•° <code>forall b. (a -&gt; f b) -&gt; x b</code> æ‰€ä»¥ <code>(s . flip fmap t)</code> å°±æ˜¯è¿™ä¸ªå‡½æ•°ç±»å‹
</p>

<p>
è®©æˆ‘ä»¬è¯•è¯•ç±»å‹å¯¹ä¸å¯¹, å¦‚æœç»™è¿™ä¸ªå‡½æ•°å…¥å‚ <code>(a -&gt; f b)</code>, t æ˜¯ <code>z a</code>, æ‰€ä»¥ <code>=flip fmap</code> å®Œäº†å¾—åˆ°çš„ç±»å‹æ˜¯ <code>z (f b)</code>.
ä»£å…¥ <code>s:: z (f b) -&gt; x b</code> åˆšå¥½å¾—åˆ° <code>x b</code>, ç±»å‹æ­£ç¡®.
</p>

<p>
ç¿»è¯‘æˆäººè¯å°±æ˜¯å¯¹äº Edward çš„ Ran æ¥è¯´ä»–çŸ¥é“å¦‚ä½•ä» <code>a -&gt; f b</code> , å¦‚æœä½ æä¾› <code>z a</code> å› ä¸º z æ˜¯å‡½å­åªè¦mapä¸€ä¸‹å°±ä¼šå¾—åˆ° <code>z (f b)</code>
å› ä¸ºå­˜åœ¨ z . f åˆ° x çš„è‡ªç„¶å˜æ¢æœ€ç»ˆåˆšå¥½ä¼šå¾—å‡º x b æ¥, æ‰€ä»¥ Edward å®šä¹‰ Ran å…¶å®å°±æ˜¯è¾“å…¥å’Œè¾“å‡º.
</p>

<p>
åè¿‡æ¥, å¦‚æœæˆ‘æœ‰ä¸ª Ran f x å¦‚ä½•æ±‚å‡ºè¿™ä¿©è‡ªç„¶å˜æ¢å‘¢?
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6a5acd;">fromRan</span> <span style="color: #b8860b;">::</span> (<span style="color: #00008b;">forall</span> a<span style="color: #b8860b;">.</span> z a <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">Ran</span> f x a) <span style="color: #b8860b;">-&gt;</span> (z (f b) <span style="color: #b8860b;">-&gt;</span> x b)
<span style="color: #6a5acd;">fromRan</span> s <span style="color: #b8860b;">=</span> flip runRan id <span style="color: #b8860b;">.</span> s
</pre>
</div>

<p>
ä¾æ¬¡å±•å¼€ä¸‹ç±»å‹:
</p>
<ol class="org-ol">
<li><code>ranRa :: forall b. Ran f x a -&gt; (a -&gt; f b) -&gt; x b</code></li>
<li><code>flip ranRan :: forall b. (a -&gt; f b) -&gt; Ran f x a -&gt; x b</code></li>
<li><code>flip ranRan id :: forall b. Ran f x (f b) -&gt; x b</code></li>
<li><code>s :: z (f b) -&gt; Ran f x (f b)</code></li>
<li><code>flip ranRan id . s :: z (f b) -&gt; x b</code></li>
</ol>

<p>
æ‰€ä»¥è¿™ä¸ª rank 2 çš„ Ran å…¶å®ç®—å‡ºæ¥æ˜¯ a = f b ä¹Ÿå°±å°‘äº†ä¸€ rank.
</p>
</div>
</div>
</div>


<div id="outline-container-org733f8e7" class="outline-3">
<h3 id="org733f8e7"><i>Kleisli Catergory</i></h3>
<div class="outline-text-3" id="text-org733f8e7">

<figure>
<object type="image/svg+xml" data="images/kleisli.svg" class="org-svg">
Sorry, your browser does not support SVG.</object>

<figcaption><span class="figure-number">Figure 16: </span>æ³¨æ„è§‚å¯Ÿå¤§ç«ç®­ &lt;=&lt; çš„è½¨è¿¹ï¼ˆä¸çŸ¥é“dotä¸ºä»€ä¹ˆä¼šæŠŠè¿™æ ¹çº¿æè¿™ä¹ˆåˆå¼¯åˆéªšçš„ï¼‰ å’Œ &gt;&gt;= ã€‚æ‰€ä»¥ Kleisli å…¶å®å°±æ˜¯æ–œç€èµ°çš„ä¸€ä¸ªèŒƒç•´ï¼Œä½†æ˜¯ &gt;&gt;= æŠŠå®ƒç¡¬ç”Ÿç”Ÿæ° <del>å¼¯</del> ç›´äº†ã€‚</figcaption>
</figure>

<p>
<ruby>å‡½å­<rt>Functor</rt></ruby> çš„èŒƒç•´å«åš <ruby>å‡½å­èŒƒç•´<rt>Functor Catergory</rt></ruby>, è‡ªç„¶å˜æ¢æ˜¯å…¶ç®­å¤´ã€‚é‚£<ruby>å•å­<rt>Monad</rt></ruby>ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªèŒƒç•´å—?<label for="8" class="margin-toggle sidenote-number"></label><input type="checkbox" id="8" class="margin-toggle"/><span class="sidenote">
å½“ç„¶, å•å­æ˜¯è‡ªå‡½å­ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æ˜¯è‡ªå‡½å­èŒƒç•´
</span>
</p>

<p>
æ˜¯çš„, è¿™ä¸ªèŒƒç•´åå­—å«åš <del>å•å­èŒƒç•´</del><label for="9" class="margin-toggle sidenote-number"></label><input type="checkbox" id="9" class="margin-toggle"/><span class="sidenote">
æ€ä¹ˆè¯´ä¹Ÿæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒ,æ€ä¹ˆå¯ä»¥å«çš„è¿™ä¹ˆlowè¿™ä¹ˆç›´æ¥
</span> <ruby>å¯è±æ–¯åˆ©èŒƒç•´<rt>Kleisli Catergory</rt></ruby><label for="10" class="margin-toggle sidenote-number"></label><input type="checkbox" id="10" class="margin-toggle"/><span class="sidenote">
è¿™ä¸ªæ˜¯æˆ‘çç¿»è¯‘çš„, ä½†æ˜¯è¯»å‡ºæ¥å°±æ˜¯è¿™ä¹ˆä¸ªæ„æ€, çœŸçš„, ä¸éª—ä½ , ç…§è¿™ä¹ˆè¯»ç»å¯¹è£…çš„ä¸€æ‰‹å¥½é€¼, ä¸ä¼šè¢«å˜²ç¬‘çš„
</span>ï¼Œé‚£ä¹ˆ Kleisli çš„ç®­å¤´æ˜¯ä»€ä¹ˆï¼Ÿ
æˆ‘ä»¬çœ‹å®šä¹‰ï¼ŒKleisli Catergory
</p>

<ol class="org-ol">
<li>ç®­å¤´æ˜¯ Kleisli ç®­å¤´ <code>a -&gt; T b</code></li>
<li>ä¸œè¥¿å°±æ˜¯cèŒƒç•´ä¸­çš„ä¸œè¥¿. å› ä¸º a å’Œ b éƒ½æ˜¯ c èŒƒç•´ä¸Šçš„ï¼Œ ç”±äºTæ˜¯è‡ªå‡½å­ï¼Œæ‰€ä»¥ T b ä¹Ÿæ˜¯ c èŒƒç•´çš„</li>
</ol>

<p>
çœ‹åˆ°å›¾ä¸Šçš„ <ruby>T f<rt> fmap f</rt></ruby> å’Œ &mu; äº†æ²¡ï¼Ÿ<label for="11" class="margin-toggle sidenote-number"></label><input type="checkbox" id="11" class="margin-toggle"/><span class="sidenote">
(æ•²é»‘æ¿) å°±æ˜¯ç´«è‰²é‚£æ ¹å˜›!
</span>
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6a5acd;">f</span> <span style="color: #b8860b;">::</span> b <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">T</span> c
<span style="color: #6a5acd;">fmap</span> f <span style="color: #b8860b;">::</span> <span style="color: #36648b;">T</span> b <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">T</span> <span style="color: #36648b;">T</span> c
<span style="color: #6a5acd;">mu</span> <span style="color: #b8860b;">::</span> <span style="color: #36648b;">T</span> <span style="color: #36648b;">T</span> c <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">T</span> c
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">def</span> <span style="color: #6a5acd;">f</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">B</span>, <span style="color: #6b8e23;">C</span>](b<span style="color: #00008b;">:</span> <span style="color: #36648b;">B</span>)<span style="color: #00008b;">:</span> <span style="color: #36648b;">T</span>[<span style="color: #6b8e23;">C</span>]
<span style="color: #00008b;">def</span> <span style="color: #6a5acd;">fmap</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">B</span>, <span style="color: #6b8e23;">C</span>](f<span style="color: #00008b;">:</span> <span style="color: #36648b;">B</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">C</span>)(tb<span style="color: #00008b;">:</span> <span style="color: #36648b;">T</span>[<span style="color: #6b8e23;">B</span>])<span style="color: #00008b;">:</span> <span style="color: #36648b;">T</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">C</span>]]
<span style="color: #00008b;">def</span> <span style="color: #6a5acd;">mu</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">C</span>](ttc<span style="color: #00008b;">:</span> <span style="color: #36648b;">T</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">C</span>]])<span style="color: #00008b;">:</span> <span style="color: #36648b;">T</span>[<span style="color: #6b8e23;">C</span>]
</pre>
</div>

<p>
ç´«è‰²çš„ç®­å¤´ <code>T f</code><label for="12" class="margin-toggle sidenote-number"></label><input type="checkbox" id="12" class="margin-toggle"/><span class="sidenote">
å³ <code>fmap f</code>
</span> å’Œç´«è‰²çš„è™šçº¿ç®­å¤´ &mu; è¿èµ·æ¥å°±æ˜¯ <code>T f'</code>, é‚£ä¹ˆæœ€å‡ºåçš„ <code>&gt;&gt;=</code> ç¬¦å·ç»ˆäºå‡ºæ¥äº†:
</p>
<div class="org-src-container">
<pre class="src src-haskell">tb <span style="color: #6a5acd;">&gt;&gt;=</span> f <span style="color: #b8860b;">=</span> (mu <span style="color: #b8860b;">.</span> fmap f) tb
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">def</span> <span style="color: #6a5acd;">flatMap</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">B</span>, <span style="color: #6b8e23;">C</span>](f<span style="color: #00008b;">:</span> <span style="color: #36648b;">B</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">C</span>])(tb<span style="color: #00008b;">:</span> <span style="color: #36648b;">T</span>[<span style="color: #6b8e23;">B</span>])<span style="color: #00008b;">:</span> <span style="color: #36648b;">T</span>[<span style="color: #6b8e23;">C</span>] <span style="color: #00008b;">=</span> (mu compose fmap(f))(tb)
</pre>
</div>

<p>
ä¸‹é¢è¿™ä¸ªå¤§ç«ç®­ <code>&lt;=&lt;</code> å¯ä»¥æŠŠè“è‰²ç®­å¤´ç»„åˆèµ·æ¥.
</p>
<div class="org-src-container">
<pre class="src src-haskell">(f <span style="color: #b8860b;">&lt;=&lt;</span> g) <span style="color: #b8860b;">=</span> mu <span style="color: #b8860b;">.</span> <span style="color: #36648b;">T</span> f <span style="color: #b8860b;">.</span> g <span style="color: #b8860b;">=</span> mu <span style="color: #b8860b;">.</span> fmap f <span style="color: #b8860b;">.</span> g
</pre>
</div>

<div class="org-src-container">
<pre class="src src-scala"><span style="color: #00008b;">def</span> <span style="color: #6a5acd;">&lt;=&lt;</span>[<span style="color: #6b8e23;">T</span>[<span style="color: #00008b;">_</span>], <span style="color: #6b8e23;">A</span>, <span style="color: #6b8e23;">B</span>, <span style="color: #6b8e23;">C</span>](f<span style="color: #00008b;">:</span> <span style="color: #36648b;">B</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">C</span>])(g<span style="color: #00008b;">:</span> <span style="color: #36648b;">A</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">B</span>])<span style="color: #00008b;">:</span> <span style="color: #36648b;">A</span> <span style="color: #00008b;">=&gt;</span> <span style="color: #6b8e23;">T</span>[<span style="color: #6b8e23;">C</span>] <span style="color: #00008b;">=</span>
  mu compose fmap(f) compose g
</pre>
</div>

<p>
å› æ­¤å¤§ç«ç®­å°±æ˜¯ Kleisli èŒƒç•´çš„ <code>compose</code>
</p>

<div class="org-src-container">
<pre class="src src-haskell">(<span style="color: #6a5acd;">&lt;=&lt;</span>) <span style="color: #b8860b;">::</span> <span style="color: #36648b;">Monad</span> <span style="color: #36648b;">T</span> <span style="color: #b8860b;">=&gt;</span> (b <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">T</span> c) <span style="color: #b8860b;">-&gt;</span> (a <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">T</span> b) <span style="color: #b8860b;">-&gt;</span> (a <span style="color: #b8860b;">-&gt;</span> <span style="color: #36648b;">T</span> c)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc07522e" class="outline-3">
<h3 id="orgc07522e">Summary</h3>
<div class="outline-text-3" id="text-orgc07522e">
<p>
ç¬¬ä¸€éƒ¨åˆ†ç†è®ºéƒ¨åˆ†éƒ½è®²å®Œäº†ï¼Œ å¦‚æœä½ è¯»åˆ°è¿™é‡Œè¿˜æ²¡æœ‰è¢«è¿™äº›<ruby>åŠç‚¸å¤©<rt>ä¹±ä¸ƒå…«ç³Ÿ</rt></ruby>çš„æ¦‚å¿µædazeï¼Œæ¥ä¸‹æ¥å¯ä»¥çœ‹çœ‹å®ƒåˆ°åº•è·Ÿæˆ‘ä»¬ç¼–ç¨‹æœ‰é¸Ÿå…³ç³»å‘¢ï¼Ÿç¬¬äºŒéƒ¨åˆ†å°†ä»‹ç»è¿™äº›æ¦‚å¿µäº§ç”Ÿçš„ä¸€äº›å®ç”¨çš„monad
</p>

<ul class="org-ul">
<li>ğŸ‘‰ <a href="./part2.html">ç¬¬äºŒéƒ¨åˆ†ï¼š<ruby>é£Ÿç”¨çŒ«å‘¢<rt> Practical Monads</rt></ruby></a></li>
<li><a href="./part3.html">ç¬¬ä¸‰éƒ¨åˆ†ï¼š<ruby>æåŸºçŒ«å‘¢<rt> Advanced Monads</rt></ruby></a></li>
</ul>

<p>
å½“ç„¶æˆ‘è¿˜æ²¡ç©ºå…¨éƒ¨å†™å®Œï¼Œå¦‚æœæœ‰å¾ˆå¤šäºº<ruby>é¢„å®š<rt>åªè¦998</rt></ruby> Gumroad ä¸Šçš„  <script src="https://gumroad.com/js/gumroad.js"></script><a class="gumroad-button" href="https://gum.co/grokking-monad" target="_blank">Grokking Monad</a> ç”µå­ä¹¦çš„è¯ï¼Œæˆ‘å¯èƒ½ä¼šç¨å¾®å†™å¾—å¿«ä¸€äº›ã€‚æ¯•ç«Ÿï¼Œå†™äº†ä¹Ÿæ²¡äººæ„Ÿå…´è¶£ä¹Ÿæ€ªæµªè´¹æ—¶é—´çš„ã€‚ä¸è¿‡ï¼Œæˆ‘çŒœä¹Ÿæ²¡å‡ ä¸ªäººèƒ½çœ‹åˆ°è¿™ä¸€è¡Œï¼Œå°±å½“æ˜¯è‡ªè¨€è‡ªè¯­å§ï¼Œæ€ä¹ˆçªç„¶è§‰å¾—è‡ªå·±å¥½åˆ†è£‚ã€‚
</p>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://en.wikipedia.org/wiki/Cheshire_Cat">https://en.wikipedia.org/wiki/Cheshire_Cat</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
å¦‚æœæ²¡çœ‹å°±åˆšå¥½ä¸è¦çœ‹äº†, ç¡®å®æœ‰äº›è¯¯å¯¼
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
ç­‰ç­‰, å†™å‰ç«¯æ€ä¹ˆäº†? JavaScript åªæ˜¯æˆ‘è§‰å¾—é¡ºæ‰‹çš„è‹¥å¹²è¯­è¨€ä¹‹ä¸€, JSç”¨æˆ·é‚£ä¹ˆå¤š, å†™ä¹¦å½“ç„¶è¦ç”¨ JS å•¦, éš¾é“ç”¨ Idris é‚£è¿˜èƒ½å–å¾—æ‰å—? <del>å½“ç„¶æœ€åç”¨JSä¹Ÿæ²¡æ€ä¹ˆå–æ‰&#x2026;</del>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
å¹¶ä¸æ˜¯è¯´è¿™ä¸¤é—¨è¯­è¨€ä¸€å®šåœ¨é„™è§†é“¾é¡¶ç«¯, è€Œæ˜¯æ‹¥æœ‰å¼ºå¤§ç±»å‹ç³»ç»Ÿçš„è¯­è¨€æ‰èƒ½ä½“ç°å‡ºèŒƒç•´è®ºçš„å†…å®¹
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
è¿™é‡Œå¯ä»¥æŠŠ Functor çš„ç¬¬ä¸€ç¬¬äºŒä¸ªå‚æ•°æ¶ˆæ‰, å› ä¸ºå·²ç»çŸ¥é“æ˜¯åœ¨ Hask èŒƒç•´äº†
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
åˆ«æ€¥, åé¢é©¬ä¸Šè®²åˆ°
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
ä¹Ÿå°±ä¸æ˜¯ä¸å˜æ€
</p></div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara"><p class="footpara">
å½“ç„¶, å•å­æ˜¯è‡ªå‡½å­ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æ˜¯è‡ªå‡½å­èŒƒç•´
</p></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara"><p class="footpara">
æ€ä¹ˆè¯´ä¹Ÿæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒ,æ€ä¹ˆå¯ä»¥å«çš„è¿™ä¹ˆlowè¿™ä¹ˆç›´æ¥
</p></div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10">10</a></sup> <div class="footpara"><p class="footpara">
è¿™ä¸ªæ˜¯æˆ‘çç¿»è¯‘çš„, ä½†æ˜¯è¯»å‡ºæ¥å°±æ˜¯è¿™ä¹ˆä¸ªæ„æ€, çœŸçš„, ä¸éª—ä½ , ç…§è¿™ä¹ˆè¯»ç»å¯¹è£…çš„ä¸€æ‰‹å¥½é€¼, ä¸ä¼šè¢«å˜²ç¬‘çš„
</p></div></div>

<div class="footdef"><sup><a id="fn.11" class="footnum" href="#fnr.11">11</a></sup> <div class="footpara"><p class="footpara">
(æ•²é»‘æ¿) å°±æ˜¯ç´«è‰²é‚£æ ¹å˜›!
</p></div></div>

<div class="footdef"><sup><a id="fn.12" class="footnum" href="#fnr.12">12</a></sup> <div class="footpara"><p class="footpara">
å³ <code>fmap f</code>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<footer>
  <p>Author: æ¬§é˜³ç»§è¶…
    <a class="github-button" href="https://github.com/sponsors/jcouyang" data-icon="octicon-heart" aria-label="Sponsor @jcouyang on GitHub">Sponsor</a>
    <a aria-label="Follow @jcouyang on GitHub" data-count-aria-label="# followers on GitHub" data-count-api="/users/jcouyang#followers" data-count-href="/jcouyang/followers" href="https://github.com/jcouyang" class="github-button">Follow</a>
  </p>
  <p>Created: 2017-02-10 Fri 00:00</p>
  <p>Generated by: <a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="https://orgmode.org">Org</a> mode 9.3.6) &#215; <a href="https://github.com/jcouyang/orgpress">OrgPress</a></p>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a>.
  <input type="swiftype" class="st-default-search-input" placeholder="Search"/>
  <a class="gumroad-button" href="https://gum.co/grokking-monad?wanted=true" target="_blank" data-gumroad-single-product="true">èŒƒç•´è®ºè£…é€¼æŒ‡å—ï¼Œè¯·è‡ªè§‰æ’é˜Ÿè£…é€¼</a>
  <div id="danmaku-comments"></div>
  <div id="disqus_thread"></div>
</footer>
</div>
</body>
</html>
