<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2020-11-17 Tue 11:08 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>JavaScriptç©è½¬Clojureå¤§æ³•ä¹‹Transducer</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Jichao Ouyang">
<meta name="description" content="é€šè¿‡ä¸Šä¸€ç¯‡[[/javascript/clojure-core.async-essence-in-native-javascript.org][Clojureé£æ ¼çš„JavaScriptå¹¶å‘ç¼–ç¨‹]]ä»‹ç»äº†å¦‚ä½•ç”¨JavaScriptäº«å—åˆ°Clojureåœ¨å¹¶å‘ç¼–ç¨‹çš„ä¼˜åŠ¿. æˆ‘å†³å®šå†™ä¸€ç³»åˆ—å…³äºå¦‚ä½•ç”¨JavaScriptç©è½¬Clojureå¤§æ³•çš„æ–‡ç« . è¿™å›è¦ç”¨ç®€å•çš„JavaScriptç©è½¬å¦ä¸€ä¸ªClojureçš„å…¨æ–°çš„æ¦‚å¿µ -- Transducer."
>
<meta name="keywords" content="transducer,reducer,clojure,clojurescript,mori,javascript,reducible,xform">
<link rel="icon" href="/favicon.ico">
<meta name="theme-color" content="#ffffff">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style/toc.css"/>
<link rel="stylesheet" href="/style/tufte.css"/>
<link rel="alternate" type="application/rss+xml" title="Jichao Ouyang" href="https://feeds.oyanglul.us/JichaoOuyangsBlog"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJRFJGX"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<header>
    <a accesskey="h" href="/index.html"> HOME </a> |
    <a href="#" id="edit-in-github">EDIT</a> |
    <a href="https://feeds.oyanglul.us/JichaoOuyangsBlog">RSS</a> |
    <a href="https://blog.oyanglul.us/theindex">INDEX</a> |
    <a accesskey="H" href="/jichao.ouyang.html">ABOUT</a> |
    <a href="https://github.com/jcouyang/blog">GITHUB</a>
</header>
</div>
<div id="content">
<header>
<h1 class="title">JavaScriptç©è½¬Clojureå¤§æ³•ä¹‹Transducer</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc781b12">Reducer</a>
<ul>
<li><a href="#org9f850d9">transform</a></li>
<li><a href="#orgc56937d">Reducer</a>
<ul>
<li><a href="#orgc3b98fb">Reducible</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org4f0de4b">Transducer</a></li>
<li><a href="#org217a674">Is it Curry?</a></li>
<li><a href="#orgceb46bd">å®Œæ•´ä¾‹å­</a></li>
</ul>
</div>
</nav>
<p>
<a href="https://blog.oyanglul.us/shutting-down-gulugulu">ğŸ“£ ä¸è¦å†æ‰¾äº†, å¼¹å¹•åŠŸèƒ½å·²å…³é—­</a>
</p>

<ul class="org-ul">
<li><a href="./clojure-core.async-essence-in-native-javascript.html">JavaScriptç©è½¬Clojureå¤§æ³•ä¹‹ - å¹¶å‘ç¼–ç¨‹</a></li>
<li><b><a href="./clojure-essence-in-javascript-transducer.html">JavaScriptç©è½¬Clojureå¤§æ³•ä¹‹ - Transducer</a></b></li>
<li><a href="./clojure-essence-in-javascript-trampoline.html">JavaScriptç©è½¬Clojureå¤§æ³•ä¹‹ - Trampoline</a></li>
<li><a href="./clojure-essence-in-javascript-macro.html">JavaScriptç©è½¬Clojureå¤§æ³•ä¹‹ - Macro (1)</a></li>
</ul>

<p>
é€šè¿‡ä¸Šä¸€ç¯‡<a href="./clojure-core.async-essence-in-native-javascript.html">Clojureé£æ ¼çš„JavaScriptå¹¶å‘ç¼–ç¨‹</a>ä»‹ç»äº†å¦‚ä½•ç”¨JavaScriptäº«å—åˆ°Clojureåœ¨å¹¶å‘ç¼–ç¨‹çš„ä¼˜åŠ¿. æˆ‘å†³å®š
å†™ä¸€ç³»åˆ—å…³äºå¦‚ä½•ç”¨JavaScriptç©è½¬Clojureå¤§æ³•çš„æ–‡ç« . è¿™å›è¦ç”¨JavaScriptç©è½¬å¦ä¸€ä¸ª
Clojureå…¨æ–°çš„æ¦‚å¿µ &#x2013; <i>Transducer</i>.
</p>

<p>
Transducer æ˜¯ Rich Hickey<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"/><span class="sidenote">
Clojureçš„ä½œè€…
</span> <a href="http://blog.cognitect.com/blog/2014/8/6/transducers-are-coming">é«˜è°ƒå®£å¸ƒ</a> çš„åœ¨Clojure 1.7 ç‰ˆæœ¬åŠ å…¥çš„åˆä¸€å¤§æ³•. åœ¨ä¹‹å‰çš„å¦ä¸€ä¸ªæ¦‚å¿µ
<a href="http://clojure.com/blog/2012/05/15/anatomy-of-reducer.html">Reducer</a> å´æ²¡é‚£ä¹ˆ <b>é«˜è°ƒ</b>. åœ¨è§£é‡Štransducerä¹‹å‰, å…ˆçœ‹çœ‹ä»€ä¹ˆæ˜¯Reducer, å¦‚æœèƒ½çœ‹æ‡‚, å†æ¥ç€çœ‹Transducer.
</p>

<div id="outline-container-orgc781b12" class="outline-2">
<h2 id="orgc781b12">Reducer</h2>
<div class="outline-text-2" id="text-orgc781b12">
<p>
è¯´é“reduceè¿™ä¸ªè¯, æƒ³å¿…JS Developerå¤§å¤šä¼šç”¨è¿‡underscore<label for="2" class="margin-toggle sidenote-number"></label><input type="checkbox" id="2" class="margin-toggle"/><span class="sidenote">
æˆ‘æ˜¯æ•…æ„å§reduceçš„å‚æ•°é¡ºåºå†™"å"çš„, åŸæ¥underscoreæ˜¯å…ˆæ¶ˆè´¹collectionçš„. è‡³äºä¸ºä»€ä¹ˆè¦åè¿‡æ¥
å¯ä»¥å‚è€ƒ<a href="https://blog.oyanglul.us/javascript/functional-javascript.html#sec-3-2">è¿™ä¸ªè§£é‡Š</a>
</span>(æˆ–ç±»ä¼¼)çš„reduceæ–¹æ³•, å¤§æ¦‚å½¢å¼æ˜¯è¿™æ ·
</p>
<div class="org-src-container">
<pre class="src src-js">_.reduce(fn, 0, [1,2,3])
</pre>
</div>
<p>
å¤§æ¦‚æ„æ€æ˜¯åˆå§‹ä¸º0, åº”ç”¨fnåˆ°æ¯ä¸€ä¸ªcollection(æ£€æµ‹coll)å…ƒç´ ä¸Š,å¾—åˆ°ä¸€ä¸ªæ–°çš„å€¼.
</p>

<p>
å¦‚æœåŠ ä¸Šmap, æ¯”å¦‚(æˆ‘è¦å¼€å§‹ç”¨<a href="https://github.com/swannodette/mori">mori</a><label for="3" class="margin-toggle sidenote-number"></label><input type="checkbox" id="3" class="margin-toggle"/><span class="sidenote">
clojurescriptä½œè€…æŠŠclojurescriptçš„ä¸€äº›æ•°æ®ç»“æ„å’Œå‡½æ•°ç¼–è¯‘æˆjavascript, è¿™æ ·å°±å¯ä»¥ç”¨æ™®é€šjsä½¿ç”¨
clojureä¸­çš„æ•°æ®ç»“æ„å’Œå‡½æ•°. documentä¸¥é‡è¿‡æ—¶, å»ºè®®çœ‹å¯¼å…¥çš„<a href="https://github.com/swannodette/mori/blob/master/src/mori.cljs">æºä»£ç </a>, ä»¥åŠclojureçš„æ–‡æ¡£, æ¥å£å’ŒclojureåŸºæœ¬ä¸€è‡´.
</span> äº†)
</p>
<div class="org-src-container">
<pre class="src src-javascript">reduce(sum, 0, map(inc [1,2,3]))
</pre>
</div>

<div class="epigraph"><blockquote>
<p>
Terminology:
</p>
<ol class="org-ol">
<li>reducing å‡½æ•°: ç”¨æ¥reduceçš„å‡½æ•°, æ¯”å¦‚sum</li>
<li>transform: å˜æ¢, ä»ä¸€ä¸ªå‡½æ•°å˜å¦ä¸€ä¸ªå‡½æ•°</li>
<li>xf: xform, transform å‡½æ•°</li>
<li>reducible: å¯è¢«reduceçš„,ä¹Ÿå°±æ˜¯å®ç°reduceæ¥å£çš„,æ¯”å¦‚æ‰€æœ‰çš„collection</li>
</ol>

</blockquote></div>

<p>
è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åˆ†æä¸€ä¸‹è¿™æ¬¡reduceåˆ°åº•å¹²äº†ä»€ä¹ˆ
</p>
<ol class="org-ol">
<li>map å‡½æ•° inc åˆ° coll æ¯ä¸€ä¸ªå…ƒç´ , å¾—åˆ°ä¸€ä¸ªæ–°çš„ coll <code>[2,3,4]</code></li>
<li>reduce æŠŠæ–°collçš„æ¯ä¸ªå…ƒç´ ç”¨sumå‡½æ•°, å¾—åˆ°ä¸€ä¸ªæ–°çš„å€¼.</li>
</ol>

<p>
å¥½å§è¿™å°±æ˜¯reduceäº†, ç”¨ä¸€ä¸ªreducingå‡½æ•°sumå»è®¡ç®—collå¾—å‡ºä¸€ä¸ªæ–°çš„å€¼.
</p>

<p>
æ¥çœ‹çœ‹æ›´å¥½çš„è§£æ³•
</p>
</div>
<div id="outline-container-org9f850d9" class="outline-3">
<h3 id="org9f850d9">transform</h3>
<div class="outline-text-3" id="text-org9f850d9">
<p>
reduceå‡½æ•°éœ€è¦ç­‰å¾…mapè¿”å›æ–°çš„collåæ‰èƒ½reduce, é‚£ä¹ˆå¯ä¸å¯ä»¥ä¸€æ­¥ç›´æ¥ç®—å‡ºæ¥å‘¢?
</p>

<p>
å‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°xfå¯ä»¥å˜æ¢reducingå‡½æ•°(ä¸Šä¾‹çš„sumæ˜¯reducingå‡½æ•°)çš„å½¢å¼, æ¯”å¦‚
</p>
<pre class="example">
xf(reduceFn) -&gt; anotherReduceFn
</pre>

<p>
å†å‡å¦‚æˆ‘ä»¬çš„æ–°mapå‡½æ•°å¯ä»¥åšè¿™ç§è½¬æ¢
</p>
<div class="org-src-container">
<pre class="src src-javascript">map(inc)(sum) -&gt; aShinyNewReduceFn
</pre>
</div>

<div class="epigraph"><blockquote>
<p>
map å‡½æ•°çš„ç®€å•transformå®ç°å¯ä»¥è¿™æ ·å®ç°,å¦‚æœä½ æ„Ÿå…´è¶£çš„è¯
</p>
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #00008b;">function</span> <span style="color: #6a5acd;">map</span>(<span style="color: #b8860b;">fn</span>){
  <span style="color: #00008b;">return</span> <span style="color: #00008b;">function</span>(<span style="color: #b8860b;">reduceFn</span>){
    <span style="color: #00008b;">return</span> <span style="color: #00008b;">function</span>(<span style="color: #b8860b;">result</span>, <span style="color: #b8860b;">input</span>){
      reduceFn(result, fn(input))
    }
  }
}
</pre>
</div>

</blockquote></div>

<p>
é‚£ä¹ˆæˆ‘ä»¬ä¹‹å‰çš„reduceå°±å¯ä»¥å†™æˆ
</p>

<div class="org-src-container">
<pre class="src src-javascript">reduce(map(inc)(sum),0,[1,2,3])
</pre>
</div>

<p>
yeah, ç°åœ¨åªéœ€è¦ä¸€æ­¥å°±reduceå‡ºæ¥ç»“æœäº†, reduceåº”ç”¨ <code>map(inc)(sum)</code> æ¥è®¡ç®—å€¼, åªéœ€è¦éå†ä¸€écoll
</p>
</div>
</div>

<div id="outline-container-orgc56937d" class="outline-3">
<h3 id="orgc56937d"><a href="https://clojure.org/reducers">Reducer</a></h3>
<div class="outline-text-3" id="text-orgc56937d">
<p>
ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸æƒ³æ”¹å˜mapå‡½æ•°çš„æ¥å£, åŸå§‹å½¢å¼çš„æ¥å£è¿˜æ˜¯æ¯”è¾ƒå¥½å†™å¥½è¯»çš„
</p>
<div class="org-src-container">
<pre class="src src-javascript">reduce(sum, 0, map(inc [1,2,3]))
</pre>
</div>
<p>
é‚£ä¹ˆéœ€è¦è¿›ä¸€æ­¥çš„æŠ½è±¡, æˆ‘æŠŠæ–°çš„mapå‡½æ•°å«åšrmapå¥½äº†
</p>
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #00008b;">function</span> <span style="color: #6a5acd;">rmap</span>(<span style="color: #b8860b;">fn</span>, <span style="color: #b8860b;">coll</span>){
  reducer(coll, map(fn))
}
</pre>
</div>
<p>
è·Ÿä»¥å‰æ¥å£ä¸€æ ·,æ¥æ”¶å‡½æ•°å’Œcoll,ä½†æ˜¯è¿”å›ä¸€ä¸ªç”±reducerç”Ÿæˆçš„reducible, æ‰€ä»¥å°±å˜æˆäº†
</p>
<div class="org-src-container">
<pre class="src src-javascript">reduce(sum, 0, reducer([1,2,3], map(inc)))
</pre>
</div>

<p>
ç­‰ç­‰,æ€ä¹ˆåšåˆ°çš„&#x2026;ä½ å·²ç»æ¶ˆè´¹äº†colläº†, é‚£reducingå‡½æ•°æ€ä¹ˆè¿›æ¥çš„, reduceræ€ä¹ˆçŸ¥é“ç”¨sumå»reduceå‘¢.
</p>
</div>


<div id="outline-container-orgc3b98fb" class="outline-4">
<h4 id="orgc3b98fb">Reducible</h4>
<div class="outline-text-4" id="text-orgc3b98fb">
<p>
ç­”æ¡ˆæ˜¯, åè½¬reduceçš„å…³ç³», åŸæ¥reduceç”¨sumå»è®¡ç®—ç»“æœ, ç°åœ¨,æˆ‘ä»¬è°ƒç”¨reducibleçš„reduceæ–¹æ³•æ¥è®¡ç®—ç»“æœ
</p>


<figure>
<img src="./images/came-out.gif" alt="came-out.gif">

</figure>

<p>
å¦‚æœä½ è¿˜æ²¡æœ‰è¢«æˆ‘å¼„æ™•çš„è¯, å‡†å¤‡å¥½, åˆæ¥ä¸€ä¸ªæ–°å•è¯ <i>reducible</i>. ä¹Ÿå°±æ˜¯å¯ä»¥è¢«reduceçš„ä¸œè¥¿.
</p>

<p>
äºæ˜¯æˆ‘ä»¬éœ€è¦collå®ç°reduceæ–¹æ³•,è¿™æ ·å°±æˆä¸ºreducibleäº†.
</p>

<p>
ä¹Ÿå°±æ˜¯reduceå‡½æ•°ç°åœ¨åº”è¯¥é•¿è¿™æ ·, æˆ‘ä»¬æš‚ä¸”å«å®ƒ <code>rreduce</code>
</p>
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #00008b;">function</span> <span style="color: #6a5acd;">rreduce</span>(<span style="color: #b8860b;">reduceFn</span>, <span style="color: #b8860b;">init</span>, <span style="color: #b8860b;">reducible</span>){
  reducible(reduceFn, init)
}
</pre>
</div>
<p>
é‚£ä¹ˆæˆ‘ä»¬çš„ä¾‹å­å°±å˜æˆäº†è¿™æ ·
</p>
<div class="org-src-container">
<pre class="src src-javascript">reducer([1,2,3], map(inc))(sum, 0)
</pre>
</div>
<p>
reduceræ¥æ”¶collå’Œxf, è¿”å›reducibleå‡½æ•°. è¿™ä¸€åˆ‡éƒ½æ˜¯lazyçš„, ç›´åˆ°rreduceè°ƒç”¨<a href="#coderef-coll" class="coderef" onmouseover="CodeHighlightOn(this, 'coderef-coll');" onmouseout="CodeHighlightOff(this, 'coderef-coll');">ç¬¬collè¡Œ</a>æ‰æ‰§è¡Œ.
</p>
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #00008b;">function</span> <span style="color: #6a5acd;">reducer</span>(<span style="color: #b8860b;">coll</span>, <span style="color: #b8860b;">xf</span>){
  <span style="color: #00008b;">return</span> <span style="color: #00008b;">function</span>(<span style="color: #b8860b;">reduceFn</span>, <span style="color: #b8860b;">init</span>){
<span id="coderef-coll" class="coderef-off">    <span style="color: #00008b;">return</span> coll.reduce(xf(reduceFn), init) (coll)</span>
  }
}
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org4f0de4b" class="outline-2">
<h2 id="org4f0de4b">Transducer</h2>
<div class="outline-text-2" id="text-org4f0de4b">
<p>
è¯´äº†åŠå¤©Reducer,æ˜æ˜è¯´å¥½çš„è¦è§£é‡Šçš„Transducerå‘¢?
</p>

<p>
å¦‚æœä½ è¿˜èƒ½follow, é‚£ä¹ˆç°åœ¨è¦å¼€å§‹è§£é‡ŠTransduceräº†
</p>

<p>
å…¶å®ä½ å·²ç»è§è¿‡Transduceräº†, å†å›é¡¾ä¸€ä¸‹ä¹‹å‰è¯´çš„Reducer
</p>
<ol class="org-ol">
<li>æ¥æ”¶ä¸€ä¸ªxfå‡½æ•°å’Œä¸€ä¸ªcoll</li>
<li>ç”¨xfè½¬æ¢reducingå‡½æ•°, å¹¶åº”ç”¨åˆ°coll</li>
</ol>

<p>
Transducerå°±æ˜¯é‚£ä¸ªxf
</p>
<div class="org-src-container">
<pre class="src src-javascript">reduce(map(inc)(sum),0,[1,2,3])
</pre>
</div>
<p>
ä¹Ÿå°±æ˜¯è¿™é‡Œé¢çš„ <code>map(inc)</code>
</p>

<p>
é , å°±è¿™ä¹ˆç®€å•?
</p>

<p>
å°±æ˜¯è¿™ä¹ˆç®€å•, å‰é¢è¯´äº†reducerçš„å‡ºç°æ˜¯å› ä¸ºæƒ³ä¿æŒåŸå§‹reduceçš„apiä¸ä¾¿, é‚£ä¹ˆtranduceråˆ™æä¾›äº†
å¦å¤–ä¸€ç§reduce api
</p>

<div class="org-src-container">
<pre class="src src-javascript">transduce(map(inc), sum, 0, [1,2,3])
</pre>
</div>
<p>
transduceæ¥æ”¶ä¸€ä¸ªtransducer,ä¸€ä¸ªreducing function, ä¸€ä¸ªåˆå§‹å€¼, ä¸€ä¸ªcoll. è¿™æ®µä»£ç è·Ÿå‰é¢å¹²çš„äº‹æƒ…ä¸€æ¨¡ä¸€æ ·.
</p>

<p>
å¦å¤–ç‰›é€¼çš„æ˜¯transducerè·Ÿcontextå®Œå…¨æ²¡æœ‰å…³ç³», å°±æ˜¯å®Œå…¨ä¸æ•°æ®è§£è€¦å¼€æ¥, æ¯”å¦‚æˆ‘ä»¬ç»„è£…å¥½ä¸€ä¸ªtransducer xf
</p>

<p>
å¯ä»¥ç”¨åœ¨ä»»ä½•åœ°æ–¹
</p>
<div class="org-src-container">
<pre class="src src-javascript">seq(xf data) <span style="color: #8c8c8c; font-style: italic;">//</span><span style="color: #8c8c8c; font-style: italic;">&#29983;&#25104;&#19968;&#20010;lazy&#30340;&#24207;&#21015;, &#21516;&#26102;lazy transform, &#27599;&#27425;&#21462;&#30340;&#26102;&#20505;data&#20250;&#34987;transform</span>
into([], xf data) <span style="color: #8c8c8c; font-style: italic;">//</span><span style="color: #8c8c8c; font-style: italic;">&#25226; data transform&#21518;&#25918;&#21040;&#19968;&#20010;&#25968;&#32452;&#37324;</span>
chan(1, xform) <span style="color: #8c8c8c; font-style: italic;">// </span><span style="color: #8c8c8c; font-style: italic;">&#24403;&#25968;&#25454;&#32463;&#36807;CSP&#30340;channel&#26102;&#34987;transform</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org217a674" class="outline-2">
<h2 id="org217a674">Is it Curry?</h2>
<div class="outline-text-2" id="text-org217a674">
<p>
æ€ä¹ˆçœ‹ç€æœ‰ç‚¹åƒæŸ¯é‡ŒåŒ–, ä¸€æ ·ä¹ˆ?
</p>

<p>
å½“ç„¶ä¸æ˜¯, æŸ¯é‡ŒåŒ–æˆ–è€…éƒ¨åˆ†å‚æ•°åªæ˜¯éƒ¨åˆ†é…ç½®å‚æ•°, è€Œtransduceræ˜¯ä¸€æ¬¡å¤šnæ¬¡è½¬æ¢çš„ç»„åˆ
</p>

<p>
æ¯”å¦‚ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„mapå¯ä»¥
</p>
<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #00008b;">var</span> <span style="color: #b8860b;">mapinc</span> = map(inc)
mapinc([1,2,3])
</pre>
</div>

<p>
è€Œä¸èƒ½
</p>
<div class="org-src-container">
<pre class="src src-javascript">mapinc(sum)
</pre>
</div>
<p>
å› ä¸ºmapå°±ä¿©å‚æ•°, ç¬¬ä¸€ä¸ªæ˜¯å‡½æ•°ç¬¬äºŒä¸ªæ˜¯data, å¦‚æœå†ç»™dataä¼šé”™è¯¯
</p>

<p>
ä½†æ˜¯tranceduceråªæ˜¯è½¬æ¢, æ‰€ä»¥åªæ¥å—reducingå‡½æ•°
</p>
<div class="org-src-container">
<pre class="src src-javascript">reduce(mapinc(sum), 0, [1,2,3])
<span style="color: #8c8c8c; font-style: italic;">// </span><span style="color: #8c8c8c; font-style: italic;">=&gt; 9</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgceb46bd" class="outline-2">
<h2 id="orgceb46bd">å®Œæ•´ä¾‹å­</h2>
<div class="outline-text-2" id="text-orgceb46bd">
<a class="jsbin-embed" href="https://jsbin.com/sulaxe/1/embed?html,js,console">JS Bin</a><script src="https://static.jsbin.com/js/embed.js"></script>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
Clojureçš„ä½œè€…
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
æˆ‘æ˜¯æ•…æ„å§reduceçš„å‚æ•°é¡ºåºå†™"å"çš„, åŸæ¥underscoreæ˜¯å…ˆæ¶ˆè´¹collectionçš„. è‡³äºä¸ºä»€ä¹ˆè¦åè¿‡æ¥
å¯ä»¥å‚è€ƒ<a href="https://blog.oyanglul.us/javascript/functional-javascript.html#sec-3-2">è¿™ä¸ªè§£é‡Š</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
clojurescriptä½œè€…æŠŠclojurescriptçš„ä¸€äº›æ•°æ®ç»“æ„å’Œå‡½æ•°ç¼–è¯‘æˆjavascript, è¿™æ ·å°±å¯ä»¥ç”¨æ™®é€šjsä½¿ç”¨
clojureä¸­çš„æ•°æ®ç»“æ„å’Œå‡½æ•°. documentä¸¥é‡è¿‡æ—¶, å»ºè®®çœ‹å¯¼å…¥çš„<a href="https://github.com/swannodette/mori/blob/master/src/mori.cljs">æºä»£ç </a>, ä»¥åŠclojureçš„æ–‡æ¡£, æ¥å£å’ŒclojureåŸºæœ¬ä¸€è‡´.
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<footer>
  <p>Author: Jichao Ouyang
    <a class="github-button" href="https://github.com/sponsors/jcouyang" data-icon="octicon-heart" aria-label="Sponsor @jcouyang on GitHub">Sponsor</a>
    <a aria-label="Follow @jcouyang on GitHub" data-count-aria-label="# followers on GitHub" data-count-api="/users/jcouyang#followers" data-count-href="/jcouyang/followers" href="https://github.com/jcouyang" class="github-button">Follow</a>
    <a href="https://twitter.com/oyanglulu" class="twitter-follow-button" data-show-screen-name="false" data-show-count="false">Follow @oyanglulu</a>
  </p>
  <p>Created: 2015-05-16 Sat 00:00</p>
  <p>Generated by: <a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.3 (<a href="https://orgmode.org">Org</a> mode 9.3.6) &#215; <a href="https://github.com/jcouyang/orgpress">OrgPress</a></p>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a>.
  <input type="swiftype" class="st-default-search-input" placeholder="Search"/>
  <a class="gumroad-button" href="https://gum.co/grokking-monad?wanted=true" target="_blank" data-gumroad-single-product="true">èŒƒç•´è®ºè£…é€¼æŒ‡å—ï¼Œè¯·è‡ªè§‰æ’é˜Ÿè£…é€¼</a>
  <div id="danmaku-comments"></div>
  <div id="disqus_thread"></div>
</footer>
</div>
</body>
</html>
